<!DOCTYPE html>
<html>

<head>
    <meta charset=utf-8 />
    <title>平台管理</title>
    <link rel="import" href="../../public.html">
    <script type="text/javascript" src="../../js/loading.js"></script>
    <script src="../../js/fenye.js"></script>
</head>

<body class="easyui-layout">
    <!--模态框-->
    <div id='w' class="easyui-window" closed='true' title="平台参数添加" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'"
        style="width:545px;height:245px;">
        <div>
            <form id="addviolationForm" action="" method="post">
                <table>
                    <tbody>
                        <tr>
                            <td>上级平台名称：</td>
                            <td>
                                <input type="text" id="superiorplatformName2" name="superiorplatformName" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                                    data-options="required:true" validtype="length[1,32]" invalidmessage="超出长度">
                            </td>
                            <td>平台接入码：</td>
                            <td>
                                <input type="text" id="superiorplatformJoin2" name="superiorplatformJoin" onkeyup="value=value.replace(/[^\d]/g,'')" maxlength="8"
                                    class="easyui-validatebox textbox validatebox-text validatebox-invalid" data-options="required:true,validType:'length[1,20]'"
                                    invalidmessage="超出长度" title="">
                            </td>
                        </tr>
                        <tr>
                            <td>平台IP：</td>
                            <td>
                                <input type="text" id="superiorplatformIp8" name="superiorplatformIp" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                                    data-options="required:true,validType:'length[10,79]'" invalidmessage="请输入有效的IP" title="">
                            </td>
                            <td>平台端口号：</td>
                            <td>
                                <input type="text" id="superiorplatformPort8" name="superiorplatformPort" onkeyup="value=value.replace(/[^\d]/g,'')" maxlength="5"
                                    class="easyui-validatebox textbox validatebox-text validatebox-invalid" data-options="required:true,validType:'length[4,5]'"
                                    invalidmessage="有效长度4至5位数字" title="">
                            </td>
                        </tr>
                        <tr>
                            <td>本地IP：</td>
                            <td>
                                <input type="text" id="localplatformIP2" name="localplatformIP" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                                    data-options="required:true,validType:'length[10,79]'" invalidmessage="请输入有效的本地IP" title="">
                            </td>
                            <td>本地端口号：</td>
                            <td>
                                <input type="text" id="localplatformPort2" name="localplatformPort" onkeyup="value=value.replace(/[^\d]/g,'')" maxlength="5"
                                    class="easyui-validatebox textbox validatebox-text validatebox-invalid" data-options="required:true,validType:'length[4,5]'"
                                    invalidmessage="有效长度4至5位数字" title="">
                            </td>
                        </tr>
                        <tr>
                            <td>接入用户名：</td>
                            <td>
                                <input type="text" id="superiorplatformUsername2" name="superiorplatformUsername" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                                    data-options="required:true,validType:'length[1,16]'">
                            </td>
                            <td>接入密码：</td>
                            <td>
                                <input type="text" id="superiorplatformPassword2" name="superiorplatformPassword" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                                    data-options="required:true,validType:'length[1,18]'" title="">
                            </td>
                        </tr>
                        <tr>
                            <td>状态开关：</td>
                            <td>
                                <input type="text" id="status2" style="width:150px" name="status" disabled="disabled" placeholder="关" class="easyui-validatebox textbox validatebox-text">
                            </td>
                            <td>单位名称：</td>
                            <td>
                                <input type="text" id="cc" class="validatebox-text easyui-combotree combo-text" autocomplete="on" data-options="url:'../../json/index_tree.json',method:'get',required:false"
                                    style="width:160px;height:18px" />
                                <!-- <span class="combo-clear qingchu" style="display: block; right: 45px; top:33px"></span> -->
                            </td>
                        </tr>
                        <tr>
                            <td>是否为交通部：</td>
                            <td>
                                <select id="transportAgency_Flag" name="transportAgency_Flag" style="width:150px">
                                    <option selected="selected" value="0">否</option>
                                    <option value="1">是</option>
                                </select>
                            </td>
                            <td>同步地址：</td>
                            <td>
                                <input type="text" id="synchronousAddress" name="synchronousAddress" readonly="readonly">
                            </td>
                        </tr>
                        <tr>
                        </tr>
                        <tr>
                            <td colspan="4" align="center">
                                <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w').window('close')">确定</a>
                                <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w').window('close')">关闭</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </form>
        </div>
    </div>

    <div id='w2' class="easyui-window" closed='true' title="平台参数修改" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'"
        style="width:545px;height:245px;">
        <div>
            <form id="addviolationForm" action="" method="post">
                <table>
                    <tbody>
                        <tr>
                            <td>上级平台名称：</td>
                            <td>
                                <input type="text" id="superiorplatformName2" name="superiorplatformName" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                                    data-options="required:true" validtype="length[1,32]" invalidmessage="超出长度">
                            </td>
                            <td>平台接入码：</td>
                            <td>
                                <input type="text" id="superiorplatformJoin2" name="superiorplatformJoin" onkeyup="value=value.replace(/[^\d]/g,'')" maxlength="8"
                                    class="easyui-validatebox textbox validatebox-text validatebox-invalid" data-options="required:true,validType:'length[1,20]'"
                                    invalidmessage="超出长度" title="">
                            </td>
                        </tr>
                        <tr>
                            <td>平台IP：</td>
                            <td>
                                <input type="text" id="superiorplatformIp8" name="superiorplatformIp" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                                    data-options="required:true,validType:'length[10,79]'" invalidmessage="请输入有效的IP" title="">
                            </td>
                            <td>平台端口号：</td>
                            <td>
                                <input type="text" id="superiorplatformPort8" name="superiorplatformPort" onkeyup="value=value.replace(/[^\d]/g,'')" maxlength="5"
                                    class="easyui-validatebox textbox validatebox-text validatebox-invalid" data-options="required:true,validType:'length[4,5]'"
                                    invalidmessage="有效长度4至5位数字" title="">
                            </td>
                        </tr>
                        <tr>
                            <td>本地IP：</td>
                            <td>
                                <input type="text" id="localplatformIP2" name="localplatformIP" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                                    data-options="required:true,validType:'length[10,79]'" invalidmessage="请输入有效的本地IP" title="">
                            </td>
                            <td>本地端口号：</td>
                            <td>
                                <input type="text" id="localplatformPort2" name="localplatformPort" onkeyup="value=value.replace(/[^\d]/g,'')" maxlength="5"
                                    class="easyui-validatebox textbox validatebox-text validatebox-invalid" data-options="required:true,validType:'length[4,5]'"
                                    invalidmessage="有效长度4至5位数字" title="">
                            </td>
                        </tr>
                        <tr>
                            <td>接入用户名：</td>
                            <td>
                                <input type="text" id="superiorplatformUsername2" name="superiorplatformUsername" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                                    data-options="required:true,validType:'length[1,16]'">
                            </td>
                            <td>接入密码：</td>
                            <td>
                                <input type="text" id="superiorplatformPassword2" name="superiorplatformPassword" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                                    data-options="required:true,validType:'length[1,18]'" title="">
                            </td>
                        </tr>
                        <tr>
                            <td>状态开关：</td>
                            <td>
                                <input type="text" id="status2" style="width:150px" name="status" disabled="disabled" placeholder="关" class="easyui-validatebox textbox validatebox-text">
                            </td>
                            <td>单位名称：</td>
                            <td>
                                <input type="text" id="cc" class="validatebox-text easyui-combotree combo-text" autocomplete="on" data-options="url:'../../json/index_tree.json',method:'get',required:false"
                                    style="width:160px;height:18px" />
                                <!-- <span class="combo-clear qingchu" style="display: block; right: 45px; top:33px"></span> -->
                            </td>
                        </tr>
                        <tr>
                            <td>是否为交通部：</td>
                            <td>
                                <select id="transportAgency_Flag" name="transportAgency_Flag" style="width:150px">
                                    <option selected="selected" value="0">否</option>
                                    <option value="1">是</option>
                                </select>
                            </td>
                            <td>同步地址：</td>
                            <td>
                                <input type="text" id="synchronousAddress" name="synchronousAddress" readonly="readonly">
                            </td>
                        </tr>
                        <tr>
                        </tr>
                        <tr>
                            <td colspan="4" align="center">
                                <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w2').window('close')">确定</a>
                                <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w2').window('close')">关闭</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </form>
        </div>
    </div>

    <div id='w1' class="easyui-window" closed='true' title="提示信息" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'"
        style="width:300px;height:150px;">
        <div style="padding: 10px;margin-bottom:15px;">
            请选择要操作的数据！
        </div>

        <div style="text-align:center;padding:5px">
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w1').window('close')">确定</a>
        </div>
    </div>

    <div style="width:100%;height:100px;padding-top:15px;box-sizing: border-box;" class="violaBox">

        <div id="violationTablesearch" style="padding: 5px; height: auto;" class="datagrid-toolbar clear_box">
            上级平台名称：
            <input type="text" name="superiorplatformName" id="superiorplatformName" class="easyui-validatebox textbox validatebox-text"
                style="height: 18px; width: 120px" onkeyup="value=value.replace(/(^\s+)|(\s+$)/g,'')">
            <!-- 添加按单位查询 -->
            单位名称：
            <input type="text" id="cc" class="validatebox-text easyui-combotree combo-text" autocomplete="on" data-options="url:'../../json/index_tree.json',method:'get',required:false"
                style="width:160px;" />
            <span class="combo-clear qingchu" style="display: block;"></span>

            接入用户名：
            <input type="text" name="superiorplatformUsername" id="superiorplatformUsername" class="easyui-validatebox textbox validatebox-text"
                style="height: 18px; width: 120px" onkeyup="value=value.replace(/(^\s+)|(\s+$)/g,'')"> 平台IP:
            <input type="text" name="superiorplatformIP" id="superiorplatformIP" class="easyui-validatebox textbox validatebox-text"
                style="height: 18px; width: 120px" onkeyup="value=value.replace(/(^\s+)|(\s+$)/g,'')"> 接入状态：
            <select panelheight="auto" id="status" style="height: 23px; width: 120px; display: none;" class="easyui-combobox combobox-f combo-f"
                editable="false">
                <option value="">全部</option>
                <option value="0">关</option>
                <option value="1">开</option>
            </select>

            <span class="easyui-linkbutton" data-options="iconCls:'icon-search'" onclick="refreshbtn('#dg')">查询</span>
            <a class="easyui-linkbutton " data-options="iconCls:'icon-search'" onclick="clearSearch('#dg')">重置</a>
            <a href="#" id="amdataTable_dealbtn" class="easyui-linkbutton" data-options="iconCls:'icon-add'" onclick="$('#w').window('open')">添加</a>
            <a href="#" id="amdataTable_dealbtn" class="easyui-linkbutton" data-options="iconCls:'icon-remove'" onclick="deleteData();">删除</a>
            <a href="#" id="amdataTable_dealbtn" class="easyui-linkbutton" data-options="iconCls:'icon-edit'" onclick="editData();">修改</a>
        </div>

        <table id="dg" title="" style="width:100%;height:800px;" data-options="onRowContextMenu: onRowContextMenu,rownumbers:true,fitColumns:true,singleSelect:false,pagination:true,url:'../../json/busuness_platform_data.json',method:'get'">
            <thead>
                <tr>
                    <th data-options="field:'checkbox',checkbox:true"></th>
                    <th data-options="field:'companyName',width:300,align:'center'">上级平台名称</th>
                    <th data-options="field:'jigou',width:300,align:'center'">组织机构</th>
                    <th data-options="field:'ip',width:300,align:'center'">平台IP</th>
                    <th data-options="field:'port',width:300,align:'center'">平台端口号</th>
                    <th data-options="field:'ip',width:600,align:'center'">本地IP</th>
                    <th data-options="field:'port',width:600,align:'center'">本地端口号</th>
                    <th data-options="field:'plaformCode',width:600,align:'center'">平台接入码</th>
                    <th data-options="field:'linkState',width:600,align:'center'">接入状态</th>
                    <th data-options="field:'isTraffic',width:600,align:'center'">是否为交通部</th>
                    <th data-options="field:'other',width:600,align:'center'">操作</th>
                </tr>
            </thead>
        </table>
    </div>
    <script>
        // 删除
        function deleteData() {

            var deletedData = $("#dg").datagrid('getChecked');
            if (deletedData == "") {
                $("#w1").window('open')
            }
            for (var i = deletedData.length - 1; i >= 0; i--) {
                var rowIndex = $("#dg").datagrid('getRowIndex', deletedData[i]);
                if (deletedData.length > 0) {
                    $("#dg").datagrid('deleteRow', rowIndex)
                }
            }
        }
        // 修改
        function editData() {

            var editData = $("#dg").datagrid('getChecked');
            if (editData == "") {
                $("#w1").window('open')
            } else {
                $("#w2").window('open')
            }
        }

        function onRowContextMenu(e, rowIndex, rowData) {
            e.preventDefault();
            var selected = $("#dg").datagrid('getRows'); //获取所有行集合对象			
            selected[rowIndex].id; //index为当前右键行的索引，指向当前行对象			
            $('#mm').menu('show', {
                left: e.pageX + 10,
                top: e.pageY
            });
        }
    </script>
</body>

</html>