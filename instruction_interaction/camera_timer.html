<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<link rel="stylesheet" type="text/css" href="../css/easyui.css">
	<link rel="stylesheet" type="text/css" href="../css/icon.css">
	<link rel="stylesheet" type="text/css" href="../css/demo.css">
	<link rel="stylesheet" type="text/css" href="../css/index.css">
	<link rel="stylesheet" type="text/css" href="../css/other.css">
	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/jquery.easyui.min.js"></script>
	<script type="text/javascript" src="../js/fenye.js"></script>
	<script type="text/javascript" src="../js/loading.js"></script>
	<body class="easyui-layout">
		<!--<div class="center">-->
			<table border="0" cellspacing="0" cellpadding="0" class="table_layout clear_box">
				<tr>
					<td>监听期限：</td>
					<td>
						<select class="easyui-combobox clear_mes">
							<option value="ar">全部</option>
							<option value="bg">每天</option>
							<option value="ca">定时</option>
							<option value="ca">时间段</option>
						</select>
					</td>
					<td>状态：</td>
					<td>
						<select class="easyui-combobox clear_mes">
							<option value="ar">全部</option>
							<option value="bg">禁用</option>
							<option value="ca">新建</option>
							<option value="zh-cht">启用</option>
							<option value="cs">已完成</option>
						</select>
					</td>
					<td colspan="6">
						<span class="easyui-linkbutton" data-options="iconCls:'icon-search'" onclick="refreshbtn('#dg')">查询</span>
						<span class="easyui-linkbutton" data-options="iconCls:'icon-cz_reset'"  onclick="clearSearch('#dg')">重置</span>
						<span class="easyui-linkbutton clear_btn" data-options="iconCls:'icon-add'" onclick="alert('#w')">添加监听任务</span>
					</td>
				</tr>
			</table>
			<table id="dg" class="easyui-datagrid" style="width:100%;height:90%" data-options="singleSelect:false,collapsible:true,rownumbers:true,pagination:true,pageList:[5,10,15,20],url:'../json/camera_time.json',method:'get'"></table>

		<!--</div>-->
		<!--模态框-->
		<div id='w' class="easyui-window" closed='true' title="违规处理" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'" style="width:1080px;height:550px;">
			<div class="message">
	            <div class="easyui-layout" data-options="fit:true" style="width: 100%; height: 450px;">
					<div data-options="region:'center',border:true" style="width: 100%; height:450px;">
						<div class="easyui-layout layout" data-options="fit:true" style="width: 100%; height: 400px;">
							<div data-options="region:'center',border:false,title:'车辆列表'" title="" class="panel-body panel-body-noborder layout-body panel-noscroll" style="width: 479px; height: 240px;">
								<table class="easyui-datagrid" id="dg_tab" style="width:100%;height:250px"data-options="singleSelect:false,collapsible:true,url:'../json/datagrid_data1.json',method:'get'">	
									<thead>
										<tr>
											<th data-options="field:'checkbox',checkbox:true"></th>
											<th data-options="field:'itemid',width:80">终端是否支持</th>
											<th data-options="field:'productid',width:100">车牌号</th>
											<th data-options="field:'listprice',width:80,align:'center'">单位</th>
											<th data-options="field:'unitcost',width:80,align:'center'">终端编码</th>
											<th data-options="field:'attr1',width:100">终端类型</th>
											<th data-options="field:'status',width:60,align:'center'">SIM卡</th>
										</tr>
									</thead>
								</table>
							 </div>
	
							<div data-options="region:'south',border:true" style="height: 208px; width:350px;" title="" class="panel-body panel-body-noheader layout-body">
								<form id="photo_param_form">
									<div id="instrtask_div">
										<p>任务名称：
											<input id="instrtaskName" class="easyui-validatebox textbox" name="instrtaskName" type="text" data-options="required:true">
										</p>
									</div>
									<p>拍照期限：
										<input type="radio" name="deadline" id="deadline1" class="check" value="1" checked="checked">每天
										<input type="radio" name="deadline" id="deadline2" class="check" value="2">定时
										<input type="radio" name="deadline" id="deadline3" class="check" value="3">时间段
									</p>
									<div id="beginDate_div" style="display: none;">
										<p>开始时间：
											<input id="beginDate" type="text" class="easyui-datetimebox " data-options="required:true" editable="false" comboname="executeDate" style="width: 171px;">
										</p>
									</div>
									<div id="endDate_div" style="display: none;">
										<p>结束时间：
											<input id="endDate" type="text" class="easyui-datetimebox " data-options="required:true" editable="false" comboname="executeDate" style="width: 171px;">
										</p>
									</div>
									<div id="frequency_div" style="display: block;">
										<p>定时频率：
											<input id="frequency" class="easyui-validatebox textbox" name="frequency" data-options="required:true" type="text" title="">(如：08:00,09:00,多个用','隔开)
										</p>
									</div>
									<div id="executeDate_div" style="display: none;">
										<p>启动时间：
											<input id="executeDate" type="text" class="easyui-datetimebox " data-options="required:true" editable="false" comboname="executeDate" style="width: 171px;">
										</p>
									</div>
								</form>
							</div>
	
						</div>
	
					</div>
					<div data-options="region:'west',split:true,border:true" title="选择车辆" style="width: 240px;height: 450px;">
						<div title="" data-options="selected:true">
							<div class="VsearchBar">
								<div class="statusFileDiv">
									<label><input name="v_status" class="v_status" type="radio" value="0" checked="">所有</label>&nbsp;
									<label><input name="v_status" class="v_status" type="radio" value="1">在线</label>&nbsp;
									<label><input name="v_status" class="v_status" type="radio" value="2">行驶</label>&nbsp;
									<span title="设置树显示" class="span-icon icon-treestatus treeShowSet"></span>&nbsp;
									<span title="重置树" class="span-icon icon-treerefsh treeReflshBtn"></span>&nbsp;
								</div>
								<div class="search">
									<input autocomplete="off" class="easyui-combobox monitorSearch" type="text">
									<input type="text" class="combo-text validatebox-text" autocomplete="off" placeholder="请输入车牌号、自编号">
									<span class="combo-clear qingchu"></span>
								</div>
							</div>
							<div class="easyui-panel">
								<ul class="easyui-tree tree" id="west_tree" data-options="url:'../json/index_tree.json',method:'get',animate:true,checkbox:true"></ul>
							</div>
						</div>
					
					</div>
					<div data-options="region:'east',split:true,border:true" title="拍照参数设置" style="width: 380px;height: 450px;">
						<form id="photograph_param_form">
							<p>
								通&nbsp;&nbsp;&nbsp;&nbsp;道：
								<input type="radio" name="photograph_enterclose" id="photograph_enterclose1" value="1" checked="">通道一
								<input type="radio" name="photograph_enterclose" id="photograph_enterclose2" value="2">通道二
								<input type="radio" name="photograph_enterclose" id="photograph_enterclose3" value="3">通道三
								<input type="radio" name="photograph_enterclose" id="photograph_enterclose4" value="4">通道四
							</p>
							<p>
								拍摄张数：<input ype="text" id="photograph_num" name="photograph_num" class="easyui-validatebox textbox validatebox-text validatebox-invalid" data-options="required:true,validType:['integer','length[1,2]']" title="">(张)
							</p>
							<p>
								拍摄间隔：<input ype="text" id="photograph_time" name="photograph_time" class="easyui-validatebox textbox validatebox-text validatebox-invalid" data-options="required:true,validType:['intOrFloat','length[1,4]']" title="">(秒)
								<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 【表示按最小间隔拍照】
							</p>
							<p>
								分&nbsp;辨&nbsp;率：
								<input type="radio" name="photograph_ratio" id="photograph_ratio1" value="1" checked="">320*210
								<input type="radio" name="photograph_ratio" id="photograph_ratio2" value="2">640*480
								<input type="radio" name="photograph_ratio" id="photograph_ratio3" value="3">800*600<br>
								<input type="radio" name="photograph_ratio" id="photograph_ratio4" value="4">176*144
								<input type="radio" name="photograph_ratio" id="photograph_ratio5" value="5">352*288
								<input type="radio" name="photograph_ratio" id="photograph_ratio6" value="6">704*288
								<input type="radio" name="photograph_ratio" id="photograph_ratio7" value="7">701*576
							</p>
							<div class="slider_pic">
								<div class="buttononbar">图片质量：</div>
								<div class="easyui-slider" data-options="showTip:true,min:1,max:10" style="width: 80px;"></div>
								【1 代表质量损失最小，10 表示压缩比最大 】
							</div>
							<div class="slider_pic">
								<div class="buttononbar">亮&nbsp;&nbsp;&nbsp;度：</div>
								<div class="easyui-slider slider-f" id="photograph_luminance" data-options="showTip:true,min:0,max:255,value:50" style="width: 200px; display: none;"></div>
								<div class="buttononbar1">(0-255)</div>
							</div>
							<div class="slider_pic">
								<div class="buttononbar">对比度：</div>
								<div class="easyui-slider slider-f" id="photograph_luminance" data-options="showTip:true,min:0,max:127,value:50" style="width: 200px; display: none;"></div>
								<div class="buttononbar1">(0-127)</div>
							</div>
							<div class="slider_pic">
								<div class="buttononbar">饱和度：</div>
								<div class="easyui-slider slider-f" id="photograph_luminance" data-options="showTip:true,min:0,max:127,value:50" style="width: 200px; display: none;"></div>
								<div class="buttononbar1">(0-127)</div>
							</div>
							<div class="slider_pic">
								<div class="buttononbar">色&nbsp;&nbsp;&nbsp;度：</div>
								<div class="easyui-slider slider-f" id="photograph_luminance" data-options="showTip:true,min:0,max:255,value:50" style="width: 200px; display: none;"></div>
								<div class="buttononbar1">(0-255)</div>
							</div>
						</form>
					
					
					</div>
					<div class="tree_show_set tree_show">
						<p><span class="filter"></span>显示车辆状态</p>
						<p><span class="filter"></span>显示终端号</p>
						<p><span class="filter"></span>显示SIM卡号</p>
						<p><span class="filter"></span>显示驾驶员</p>
						<p><span class="filter"></span>显示车辆自编号</p>
					</div>
				</div>
			</div>	
			<div style="width: 100%; text-align: center;">
				<a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w').window('open')">保存</a>
				<a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w').window('close')">关闭</a>
			</div>
		</div>

	</body>
	<script type="text/javascript">
		//添加监听任务中的点击切换
		$('.check').each(function() {
			$(this).click(function() {
				if($(this).val() == '1') {
					$('#frequency_div').show();
					$('#beginDate_div').hide();
					$('#endDate_div').hide();
					$('#executeDate_div').hide();
				} else if($(this).val() == '2') {
					$('#executeDate_div').show();
					$('#beginDate_div').hide();
					$('#endDate_div').hide();
					$('#frequency_div').hide();
				} else if($(this).val() == '3') {
					$('#beginDate_div').show();
					$('#endDate_div').show();
					$('#frequency_div').show();
					$('#executeDate_div').hide();
				}
			})
		})
		$('#dg').datagrid({
			columns: [
				[{
						field: 'instrtaskName',
						title: '任务名称',
						width: 270,
						align: 'center'
					},
					{
						field: 'recordorName',
						title: '制定人',
						width: 270,
						align: 'center'
					},
					{
						field: 'instructParam',
						title: '启动频率',
						width: 270,
						align: 'center'
					},
					{
						field: 'executeDate',
						title: '启动时间',
						width: 270,
						align: 'center'
					},
					{
						field: 'status',
						title: '状态',
						width: 270,
						align: 'center'
					},
					{
						field: 'action',
						title: '操作',
						width: 300,
						align: 'center',
						formatter: function(value, row, index) {
							if(row.editing) {} else {
								var e = '<a href="#" onclick="editrow(this)" style="color:blue;">点名车辆</a> ';
								var d = '<a href="#" onclick="deleterow(this)" style="color:blue;margin:0px 10px;">删除</a>';
								var f = '<a href="#" onclick="saverow(this)" style="color:blue;">启用</a>';
								return e + d + f;
							}
						}
					}
				]
			]

		});

		function getRowIndex(target) {
			var tr = $(target).closest('tr.datagrid-row');
			return parseInt(tr.attr('datagrid-row-index'));
		}

		function editrow(target) {
			$('#dg').datagrid('beginEdit', getRowIndex(target));
		}

		function deleterow(target) {
			$.messager.confirm('Confirm', 'Are you sure?', function(r) {
				if(r) {
					$('#dg').datagrid('deleteRow', getRowIndex(target));
				}
			});
		}

		function saverow(target) {
			$('#dg').datagrid('endEdit', getRowIndex(target));
		}
		
		$("#west_tree").tree({
				        checkbox: true,
				        cascadeCheck: false,
				        onCheck: function (node, checked) {
				          if (checked) {
				          	var nodes = $('#west_tree').tree('getChecked');
								var s = '';
								for(var i=0; i<nodes.length; i++){
									if (s != '') s += ',';
									s += nodes[i].text;
								}
								$("#dg_tab").datagrid("reload");
				          }
				        }
				      });
		
	</script>

</html>