<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<link rel="import" href="../../public.html">
	<script type="text/javascript" src="../../js/loading.js"></script>

	<body class="easyui-layout" style="overflow: hidden;">
		<div data-options="region:'center',border:true" style="overflow: hidden;">
		<form id="searchForm" method="post">
			<table id="query" border="0" cellspacing="0" cellpadding="0" class="clear_box">
						<tr>
							<td>角色：</td>
							<td><input type="text" name="name" class="width1" /></td>
							<td>角色类型：</td>
							<td>
								<input id="type" class="easyui-combobox width1" name="type">
								<!--<select name="type" class="easyui-combobox width1" id="type">
									<option value="3">选择</option>
									<option value="0">0</option>
									<option value="1">1</option>
									<option value="2">2</option>
								</select>-->
							</td>
							<td>是否共享：</td>
							<td>
								<select name="isShare" class="easyui-combobox width1" id="isShare">
									<option value="2">选择</option>
									<option value="0">否</option>
									<option value="1">是</option>
								</select>
							</td>
							<td>使用单位</td>
							<td><input type="text" name="useCompany" class="width1"></input></td>						
							<td style="padding-left: 5px;">
								<span class="easyui-linkbutton" iconcls="icon-search" onclick="query('#dg','#searchForm')">查询</span>
								<span class="easyui-linkbutton" iconcls="icon-cz_reset" onclick="clearSearch('#dg')">重置</span>
								<span class="easyui-linkbutton" iconcls="icon-add" onclick="addMes('#EditForm','#dg','#dlg0','http://dayan.huayitec.com/roleController/insert')">添加</span>		
							</td>
						</tr>
					</table>
		</form>				
			<div class="box" style="width: 100%;height:700px;">
				<table id="dg" class="easyui-datagrid" style="width:100%;height:100%;" data-options='fitColumns:true,singleSelect:true,collapsible:true,rownumbers:true,pagination:true,url:"http://dayan.huayitec.com/roleController/getListPage"'>
					<thead>
						<tr>
							<th data-options="field:'name',width:200">角色</th>
							<th data-options="field:'type',width:200">角色类型</th>
							<th data-options="field:'description',width:200">角色描述</th>
							<th data-options="field:'isShare',formatter:formatter_share,width:200">是否共享</th>
							<th data-options="field:'creator',width:200">创建人</th>
							<th data-options="field:'useCompany',width:200">使用单位</th>
							<th data-options="field:'caozuo',formatter:formatter_caozuo,width:200">操作</th>
						</tr>
					</thead>
				</table>
			</div>

			<!--模态框-->
			<div id='dlg0' class="easyui-window" closed='true' title="新增用户" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'" style="width:330px;height:300px;">
				<div style="padding: 10px; box-sizing: border-box;">
					<form id="EditForm" method="post">
						<table border="0" style="height:240px;">
							<tr>
								<td>角色名：</td>
								<td><input type="text" name="name" class="easyui-validatebox textbox" style="width:151px" data-options="required:true"></td>
							</tr>
							<tr>
								<td>使用单位：</td>
								<td class="useComp">
									<input class="easyui-combotree" id="useCompany" name="useCompany" data-options="url:'../../json/tree_data1.json',method:'get',required:true" style="width:155px;">
								</td>
							</tr>
							<tr>
								<td>角色描述：</td>
								<td><textarea rows="6" cols="25" name="description"></textarea></td>
							</tr>
							<tr align="center">
								<td colspan="2">
									<input type="submit" value="提交" class="add easyui-linkbutton"></input>
									<input type="button" value="关闭" class="easyui-linkbutton" onclick="$('#dlg0').window('close')"></input>
								</td>
							</tr>
						</table>
					</form>
				</div>
			</div>

			<div id='dlg' class="easyui-window" closed='true' title="菜单权限" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'" style="width:300px;height:400px;">
				<div style="padding: 10px; box-sizing: border-box;">
					<div class="easyui-panel" style="height: 280px;">
						<ul class="easyui-tree" data-options="url:'../../json/property.json',method:'get',animate:true,checkbox:true"></ul>
					</div>
				</div>
				<div style="width:100%; text-align: center;">
					<a href="#" class="easyui-linkbutton" onclick="$('#dlg').window('close')">保存</a>
					<a href="#" class="easyui-linkbutton" onclick="$('#dlg').window('close')">关闭</a>
				</div>
			</div>

			<div id='dlg1' class="easyui-window" closed='true' title="功能权限" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'" style="width:300px;height:400px;">
				<div style="padding: 10px; box-sizing: border-box;">
					<div class="easyui-panel" style="height:280px;">
						<ul class="easyui-tree" data-options="url:'../../json/property.json',method:'get',animate:true,checkbox:true"></ul>
					</div>
				</div>
				<div style="width:100%; text-align: center;">
					<a href="#" class="easyui-linkbutton" onclick="$('#dlg1').window('close')">保存</a>
					<a href="#" class="easyui-linkbutton" onclick="$('#dlg1').window('close')">关闭</a>
				</div>
			</div>
			<div id='dlg2' class="easyui-window" closed='true' title="按钮权限" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'" style="width:300px;height:400px;">
				<div style="padding: 10px; box-sizing: border-box;">
					<div class="easyui-panel" style="height: 280px;">
						<ul class="easyui-tree" data-options="url:'../../json/property.json',method:'get',animate:true,checkbox:true"></ul>
					</div>
				</div>
				<div style="width:100%; text-align: center;">
					<a href="#" class="easyui-linkbutton" onclick="$('#dlg2').window('close')">保存</a>
					<a href="#" class="easyui-linkbutton" onclick="$('#dlg2').window('close')">关闭</a>
				</div>
			</div>

		</div>

	</body>

	<script type="text/javascript">
		function formatter_share(value, row, index) {
			if(value == 0) {
				return value = '否'
			} else if(value == 1){
				return value = '是'
			}
		}
		function formatter_caozuo(value, row, index) {
			var e = '<a href="#" onclick=alert("#dlg")  style="color: dodgerblue;margin-right:5px">菜单权限</a>';
			var x = '<a href="#" onclick=alert("#dlg1")  style="color: dodgerblue;margin-right:5px">功能权限</a>';
			var p = '<a href="#" onclick=alert("#dlg2")  style="color: dodgerblue;">按钮权限</a>';
			return e + x + p;
		}		      
//下拉框
    initComboboxFn('#type', './combobox.json');

</script>

