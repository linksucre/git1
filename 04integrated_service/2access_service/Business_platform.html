<!DOCTYPE html>
<html>

<head>
    <meta charset=utf-8 />
    <title>业务平台接入</title>
    <link rel="import" href="../../public.html">
    <script type="text/javascript" src="../../js/loading.js"></script>
    <script src="../../js/fenye.js"></script>
</head>

<body class="easyui-layout">
    <!--模态框-->
    <div id='w' class="easyui-window" closed='true' title="新增" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'"
        style="width:600px;height:260px;">
        <table>
            <tbody>
                <tr>
                    <td>平台名称：</td>
                    <td>
                        <input type="text" id="platformName" name="platformName" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                            data-options="required:true,validType:'length[1,16]'">
                    </td>
                    <td>单位名称：</td>
                    <td>
                        <div class="search">
                            <input type="text" id="cc" class="validatebox-text easyui-combotree combo-text" autocomplete="on" data-options="url:'../../json/index_tree.json',method:'get',required:false"
                                style="width:180px;height:19px" />
                            <span class="combo-clear qingchu" style="display: block; right: 45px;"></span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>接入平台IP：</td>
                    <td>
                        <input type="text" id="platformIp" name="platformIp" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                            data-options="required:true,validType:['length[1,16]','ip']">
                    </td>
                    <td>备用IP：</td>
                    <td>
                        <input type="text" id="platformSip" name="platformSip" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                            data-options="required:true,validType:['length[1,16]','ip']">
                    </td>
                </tr>
                <tr>
                    <td>接入端口号：</td>
                    <td>
                        <input type="text" id="connectPort" name="connectPort" onkeyup="value=value.replace(/[^\d]/g,'')" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                            data-options="required:true,validType:['length[1,5]','port']">
                    </td>
                    <td>备用端口号：</td>
                    <td>
                        <input type="text" id="connectSport" name="connectSport" onkeyup="value=value.replace(/[^\d]/g,'')" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                            data-options="required:true,validType:['length[1,5]','port']">
                    </td>
                </tr>
                <tr>
                    <td>服务URL：</td>
                    <td>
                        <input type="text" id="webServiceUrl" name="webServiceUrl" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                            data-options="required:true,validType:['length[1,64]','url']">
                    </td>
                    <td>服务备用URL：</td>
                    <td>
                        <input type="text" id="webServiceSurl" name="webServiceSurl" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                            data-options="required:true,validType:['length[1,64]','url']">
                    </td>
                </tr>
                <tr>
                    <td>接入类型：</td>
                    <td>
                        <select id="connectType" style="height: 19px; width: 147px; display: none;" data-options="required:true" class="easyui-combobox combobox-f combo-f"
                            editable="false">
                            <option value="">服务接入</option>
                            <option value="0">平台接入</option>
                        </select>
                    </td>
                    <td align="center" width="20%">服务数据同步间隔时长：</td>
                    <td>
                        <input type="text" id="limitTime" name="limitTime" style="width: 110px" onkeyup="value=value.replace(/[^\d]/g,'')" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                            data-options="required:true,validType:'length[1,8]'">(分钟)</td>
                </tr>
                <tr>
                    <td>接入用户名：</td>
                    <td>
                        <input type="text" id="userName" name="userName" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                            data-options="required:true,validType:['length[5,16]','paramCode']">
                    </td>
                    <td>接入密码：</td>
                    <td>
                        <input type="text" id="password" name="password" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                            data-options="required:true,validType:['length[5,16]','paramCode']">
                    </td>
                </tr>
            </tbody>

        </table>
        <div id="platform_add_dialog_btn" style="text-align:center; margin-top:23px" class="dialog-button">
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w').window('close')">确定</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w').window('close')">关闭</a>
        </div>
    </div>

    <div id='w2' class="easyui-window" closed='true' title="修改" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'"
        style="width:600px;height:260px;">
        <table>
            <tbody>
                <tr>
                    <td>平台名称：</td>
                    <td>
                        <input type="text" id="platformName1" name="platformName1" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                            data-options="required:true,validType:'length[1,16]'">
                    </td>
                    <td>单位名称：</td>
                    <td>
                        <div class="search">
                            <input type="text" id="cc1" class="validatebox-text easyui-combotree combo-text" autocomplete="on" data-options="url:'../../json/index_tree.json',method:'get',required:false"
                                style="width:180px;height:19px" />
                            <span class="combo-clear qingchu" style="display: block; right: 45px;"></span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>接入平台IP：</td>
                    <td>
                        <input type="text" id="platformIp1" name="platformIp1" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                            data-options="required:true,validType:['length[1,16]','ip']">
                    </td>
                    <td>备用IP：</td>
                    <td>
                        <input type="text" id="platformSip1" name="platformSip1" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                            data-options="required:true,validType:['length[1,16]','ip']">
                    </td>
                </tr>
                <tr>
                    <td>接入端口号：</td>
                    <td>
                        <input type="text" id="connectPort1" name="connectPort1" onkeyup="value=value.replace(/[^\d]/g,'')" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                            data-options="required:true,validType:['length[1,5]','port']">
                    </td>
                    <td>备用端口号：</td>
                    <td>
                        <input type="text" id="connectSport1" name="connectSport1" onkeyup="value=value.replace(/[^\d]/g,'')" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                            data-options="required:true,validType:['length[1,5]','port']">
                    </td>
                </tr>
                <tr>
                    <td>服务URL：</td>
                    <td>
                        <input type="text" id="webServiceUrl1" name="webServiceUrl1" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                            data-options="required:true,validType:['length[1,64]','url']">
                    </td>
                    <td>服务备用URL：</td>
                    <td>
                        <input type="text" id="webServiceSurl1" name="webServiceSurl1" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                            data-options="required:true,validType:['length[1,64]','url']">
                    </td>
                </tr>
                <tr>
                    <td>接入类型：</td>
                    <td>
                        <select id="connectType1" style="height: 19px; width: 147px; display: none;" data-options="required:true" class="easyui-combobox combobox-f combo-f"
                            editable="false">
                            <option value="">服务接入</option>
                            <option value="0">平台接入</option>
                        </select>
                    </td>
                    <td align="center" width="20%">服务数据同步间隔时长：</td>
                    <td>
                        <input type="text" id="limitTime1" name="limitTime1" style="width: 110px" onkeyup="value=value.replace(/[^\d]/g,'')" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                            data-options="required:true,validType:'length[1,8]'">(分钟)</td>
                </tr>
                <tr>
                    <td>接入用户名：</td>
                    <td>
                        <input type="text" id="userName1" name="userName1" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                            data-options="required:true,validType:['length[5,16]','paramCode']">
                    </td>
                    <td>接入密码：</td>
                    <td>
                        <input type="text" id="password1" name="password1" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                            data-options="required:true,validType:['length[5,16]','paramCode']">
                    </td>
                </tr>
            </tbody>

        </table>
        <div id="platform_edit_dialog_btn" style="text-align:center; margin-top:23px" class="dialog-button">
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w2').window('close')">保存</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w2').window('close')">关闭</a>
        </div>
    </div>


    <div id='w1' class="easyui-window" closed='true' title="提示信息" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'"
        style="width:300px;height:150px;">
        <div style="padding: 10px;margin-bottom:15px;">
            选择数据为空，请选择未处理数据！
        </div>

        <div style="text-align:center;padding:5px">
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w1').window('close')">确定</a>
        </div>
    </div>
    <div style="width:100%;height:100px;padding-top:15px;box-sizing: border-box;" class="violaBox">
        <table data-options="fit:true" style="border:none" class="table_layout">
            <tbody>
                <tr>
                    <td>平台名称：</td>
                    <td>
                        <input type="text" id=" platformName" style="width: 120px" class=""> </td>
                    <td colspan="4" style="text-align: left;padding-left: 20px;position: relative;">
                        <td>接入状态：</td>
                        <td>
                            <select id="status_sel" style="height: 23px; width: 120px; display: none;" class="easyui-combobox combobox-f combo-f" editable="false">
                                <option value="">全部</option>
                                <option value="0">断开</option>
                                <option value="1">连接</option>
                            </select>
                        </td>
                    </td>
                    <td>
                        <span class="easyui-linkbutton" data-options="iconCls:'icon-search'" onclick="query('#dg','#searchForm')">查询</span>
                        <span class="easyui-linkbutton" data-options="iconCls:'icon-add'" onclick="addMes('#add','#dg','#w','http://dayan.huayitec.com/driverController/insert')">添加</span>
                        <span class="easyui-linkbutton" data-options="iconCls:'icon-remove'" onclick="deleteData()">删除</span>
                        <span class="easyui-linkbutton" data-options="iconCls:'icon-edit'" onclick="editData()">修改</span>
                    </td>
                </tr>
            </tbody>
        </table>
        <table id="dg" title="" style="width:100%;height:800px;" data-options="rownumbers:true,fitColumns:true,singleSelect:true,url:'../../json/busuness_platform_data.json',method:'get'">
            <thead>
                <tr>
                    <th data-options="field:'platformName',width:300,align:'center'">平台名称</th>
                    <th data-options="field:'companyName',width:300,align:'center'">单位名称</th>
                    <th data-options="field:'ip',width:200,align:'center'">接入平台IP</th>
                    <th data-options="field:'port',width:150,align:'center'">接入端口号</th>
                    <th data-options="field:'type',width:150,align:'center'">接入类型</th>
                    <th data-options="field:'url',width:200,align:'center'">服务URL</th>
                    <th data-options="field:'time',width:200,align:'center'">服务数据同步间隔时长</th>
                    <th data-options="field:'linkState',width:150,align:'center'">连接状态</th>
                </tr>
            </thead>
        </table>
    </div>
    <script>
        // 删除
        function deleteData() {

            var deletedData = $("#dg").datagrid('getChecked');
            if (deletedData == "") {
                $("#w1").window('open')
            }
            for (var i = deletedData.length - 1; i >= 0; i--) {
                var rowIndex = $("#dg").datagrid('getRowIndex', deletedData[i]);
                if (deletedData.length > 0) {
                    $("#dg").datagrid('deleteRow', rowIndex)
                }
            }
        }
        // 修改
        function editData() {

            var editData = $("#dg").datagrid('getChecked');
            if (editData == "") {
                $("#w1").window('open')
            } else{
                $("#w2").window('open')
                $('#w2').find('#platformName1').val("哈哈")
            }

        }
    </script>
</body>

</html>