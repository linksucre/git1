<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<link rel="stylesheet" type="text/css" href="../css/easyui.css">
	<link rel="stylesheet" type="text/css" href="../css/icon.css">
	<link rel="stylesheet" type="text/css" href="../css/demo.css">
	<link rel="stylesheet" type="text/css" href="../css/index.css">
	<link rel="stylesheet" type="text/css" href="../css/other.css">
	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/jquery.easyui.min.js"></script>
	<script type="text/javascript" src="../js/fenye.js"></script>
	<body>
		<div class="easyui-layout" data-options="fit:true">
			<div data-options="region:'center',border:true">
				<table border="0" cellspacing="0" cellpadding="0" style="margin: 10px 0 10px 5px;" class="clear_box">
					<tr>
						<td>用户名登录：</td>
						<td><input type="text"/></td>
						<td>用户姓名：</td>
						<td><input type="text"/></td>
						<td>单位名称：</td>
						<td><input id="cc" class="easyui-combotree" data-options="url:'../json/tree_data1.json',method:'get',required:false" style="width:200px;"></td>
						<td>手机号</td>
						<td><input type="text"></input>
						</td>
						<td> <input type="checkbox"  style="vertical-align: middle;"/> 仅显示已删除用户</td>
						<td style="padding-left: 5px;">
							<span class="easyui-linkbutton" iconcls="icon-search" onclick="refreshbtn('#dg')">查询</span>
							<span class="easyui-linkbutton" iconcls="icon-cz_reset" onclick="clearSearch('#dg')">重置</span>
							<span class="easyui-linkbutton add" iconcls="icon-add" onclick="alert('#dlg0')">添加</span>
							<span class="easyui-linkbutton" iconcls="icon-excel"><a id="exportExcel" href="javascript:;">导出</a></span>							
						</td>
					</tr>
				</table>				
				<table id="dg" class="easyui-datagrid" title="" style="width:100%;height:600px" data-options="singleSelect:true,collapsible:true,rownumbers:true,pagination:true,pageList:[5,10,15,20],url:'../json/user_manage.json',method:'get'"></table>
			   <!--模态框--> 
			    <div id='dlg0' class="easyui-window" closed='true' title="新增用户" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'" style="width:700px;height:310px;">
					<div style="padding: 10px; box-sizing: border-box;"> 
						<table style="width: 100%">
							<tbody>
								<tr>
									<td>用户登录名：</td>
									<td><input type="text" name="userCode" id="userCode" class="easyui-validatebox" style="width:151px" data-options="required:true"></td>
									<td>用户姓名：</td>
									<td><input type="text" name="userName" id="userName" class="easyui-validatebox" style="width:151px" data-options="required:true"></td>
								</tr>
								<tr>
									<td>座机号：</td>
									<td><input type="text" name="phone" style="width:151px"></td>
									<td>手机号：</td>
									<td><input type="text" name="mobilePhone" style="width:151px"></td>
								</tr>
								<tr>
									<td>单位名称：</td>
									<td><input class="easyui-combotree" data-options="url:'../json/tree_data1.json',method:'get',required:false" style="width:155px;"></td>
									<td>邮箱：</td>
									<td><input type="text" name="email" id="email" class="easyui-validatebox" maxlength="50" style="width:151px" data-options="required:true"></td>
								</tr>
								<tr>
									<td>单位ERP编号：</td>
									<td><input type="text" name="gerpCode" id="gerpCode" style="width:151px" data-options="validType:'numberAndABC'" class="easyui-validatebox" maxlength="16"></td>
									<td>用户ERP编号：</td>
									<td><input type="text" name="userErpCode" id="userErpCode" style="width:151px" data-options="validType:'numberAndABC'" class="easyui-validatebox" maxlength="16"></td>
								</tr>
								<tr>
									<td>岗位：</td>
									<td>
										<select class="easyui-combobox">
											<option value="">公司总经理</option>
											<option value="">总调度长</option>
											<option value="">副总调度长</option>
											<option value="">分公司安全科科长</option>
											<option value="">分公司安全科副科长</option>
											<option value="">物资贸易管理处处长</option>
											<option value="">物资贸易管理处副处长</option>
											<option value="">安全环保处副处长</option>
											<option value="">信息管理处处长</option>
											<option value="">信息管理处副处长</option>
											<option value="">总调度室处长助理</option>
											<option value="">物资贸易管理处科长</option>
										</select>
									</td>
								</tr>
								<tr>
									<td>所属角色：</td>
									<td colspan="3">
									     <select class="easyui-combobox" style="width: 437px";>
									    	<option value="">分公司监控员</option>
									    	<option value="">项目监控员</option>
									    	<option value="">物探公司普通用户</option>
									    	<option value="">青海油田管理员</option>
									    	<option value="">青海油田监控员</option>
									    	<option value="">油建汽服中心</option>
									    	<option value="">高级管理员</option>
									    	<option value="">吉林查岗管理</option>
									    	<option value="">普通用户管理</option>
									    	<option value="">外管账号</option>
									    </select>
									</td>
								</tr>
							</tbody>
						</table>
	               </div>  
					
					<div style="width:100%; text-align: center;margin-top: 10px;">
						<a href="#" class="easyui-linkbutton add_list1" onclick="$('#dlg0').window('close')">保存</a>
						<a href="#" class="easyui-linkbutton" onclick="$('#dlg0').window('close')">关闭</a>
					</div>
				</div>
			    <div id='dlg' class="easyui-window" closed='true' title="修改用户" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'" style="width:700px;height:270px;">
					<div style="padding: 10px; box-sizing: border-box;"> 
						<table style="width: 100%">
							<tbody>
								<tr>
									<td>用户登录名：</td>
									<td><input type="text" name="userCode" id="userCode" class="easyui-validatebox" style="width:151px" data-options="required:true"></td>
									<td>用户姓名：</td>
									<td><input type="text" name="userName" id="userName" class="easyui-validatebox" style="width:151px" data-options="required:true"></td>
								</tr>
								<tr>
									<td>座机号：</td>
									<td><input type="text" name="phone" style="width:151px"></td>
									<td>手机号：</td>
									<td><input type="text" name="mobilePhone" style="width:151px"></td>
								</tr>
								<tr>
									<td>单位名称：</td>
									<td><input class="easyui-combotree" data-options="url:'../json/tree_data1.json',method:'get',required:false" style="width:155px;"></td>
									<td>邮箱：</td>
									<td><input type="text" name="email" id="email" class="easyui-validatebox" maxlength="50" style="width:151px" data-options="required:true"></td>
								</tr>
								<tr>
									<td>单位ERP编号：</td>
									<td><input type="text" name="gerpCode" id="gerpCode" style="width:151px" data-options="validType:'numberAndABC'" class="easyui-validatebox" maxlength="16"></td>
									<td>用户ERP编号：</td>
									<td><input type="text" name="userErpCode" id="userErpCode" style="width:151px" data-options="validType:'numberAndABC'" class="easyui-validatebox" maxlength="16"></td>
								</tr>
								<tr>
									<td>岗位：</td>
									<td>
										<select class="easyui-combobox">
											<option value="">公司总经理</option>
											<option value="">总调度长</option>
											<option value="">副总调度长</option>
											<option value="">分公司安全科科长</option>
											<option value="">分公司安全科副科长</option>
											<option value="">物资贸易管理处处长</option>
											<option value="">物资贸易管理处副处长</option>
											<option value="">安全环保处副处长</option>
											<option value="">信息管理处处长</option>
											<option value="">信息管理处副处长</option>
											<option value="">总调度室处长助理</option>
											<option value="">物资贸易管理处科长</option>
										</select>
									</td>
								</tr>
								<tr>
									<td>所属角色：</td>
									<td colspan="3">
									     <select class="easyui-combobox" style="width: 437px";>
									    	<option value="">分公司监控员</option>
									    	<option value="">项目监控员</option>
									    	<option value="">物探公司普通用户</option>
									    	<option value="">青海油田管理员</option>
									    	<option value="">青海油田监控员</option>
									    	<option value="">油建汽服中心</option>
									    	<option value="">高级管理员</option>
									    	<option value="">吉林查岗管理</option>
									    	<option value="">普通用户管理</option>
									    	<option value="">外管账号</option>
									    </select>
									</td>
								</tr>
							</tbody>
						</table>
	               </div>  
					<div style="width:100%; text-align: center;margin-top: 10px;">
						<a href="#" class="easyui-linkbutton" onclick="$('#dlg').window('close')">保存</a>
						<a href="#" class="easyui-linkbutton" onclick="$('#dlg').window('close')">关闭</a>
					</div>
				</div>
			    <div id='dlg1' class="easyui-window" closed='true' title="用户详情" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'" style="width:500px;height:260px;">
					<div style="padding: 10px; box-sizing: border-box;"> 
						<table style="width: 100%">
							<tbody>
								<tr style="height: 25px">
									<td>用户登录名：</td>
									<td><label id="userCode_show">86175344</label></td>
									<td>用户姓名：</td>
									<td><label id="userName_show">张法</label></td>
								</tr>
								<tr style="height: 25px">
									<td>座机号：</td>
									<td><label id="phone_show"></label></td>
									<td>手机号：</td>
									<td><label id="mobilePhone_show"></label></td>
								</tr>
								<tr style="height: 25px">
									<td>组织机构：</td>
									<td><label id="orgName_show">华油信通集团事业部</label></td>
									<td>邮箱：</td>
									<td><label id="email_show"></label></td>
								</tr>
								<tr style="height: 25px">
									<td>单位ERP编号：</td>
									<td><label id="gerpCode_show">65049715</label></td>
									<td>用户ERP编号：</td>
									<td><label id="userErpCode_show">86175344</label></td>
								</tr>
								<tr style="height: 25px">
									<td>所属角色：</td>
									<td colspan="3"><label id="userRoles_show">普通用户</label></td>
								</tr>
						    </tbody>
						</table>
					</div>  
					<div style="width:100%; text-align: center;margin-top: 10px;">
						<a href="#" class="easyui-linkbutton" onclick="$('#dlg1').window('close')">关闭</a>
					</div>
				</div>
			    <div id='dlg2' class="easyui-window" closed='true' title="提示信息" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'" style="width:300px;height:170px;">
					<div style="padding: 10px; box-sizing: border-box;"> 
					    <table border="0">
					    	<tr>
					    		<td><div class="messager-icon messager-question" ></div></td>
					    		<td>您确认初始化【张法】的密码吗？</td>
					    	</tr>
					    </table>
					</div>  
					<div style="width:100%; text-align: center;margin-top: 10px;">
						<a href="#" class="easyui-linkbutton" onclick="$('#dlg2').window('close')">确定</a>
						<a href="#" class="easyui-linkbutton" onclick="$('#dlg2').window('close')">关闭</a>
					</div>
				</div>
			   
			</div>
		</div>
    
	</body>

	<script type="text/javascript">
		$(function() {
			$('#dg').datagrid({
				idField: 'itemid',
				columns: [
					[
					   {
							field: 'userCode',
							title: '用户登录名',
							width: 130,
							align: 'center',
							sortable: true
						},
						{
							field: 'userName',
							title: '用户姓名',
							width: 130,
							align: 'center',
							sortable: true
						},
						{
							field: 'email',
							title: '邮箱',
							width: 200,
							align: 'center',
							sortable: true
						},
						{
							field: 'mobilePhone',
							title: '手机号',
							width: 130,
							align: 'center',
							sortable: true
						},
						{
							field: 'phone',
							title: '座机号',
							width: 130,
							align: 'center',
							sortable: true
						},
						{
							field: 'orgName',
							title: '单位名称',
							width: 210,
							align: 'center',
							sortable: true
						},
						{
							field: 'positionName',
							title: '职务',
							width: 150,
							align: 'center',
							sortable: true
						},
						{
							field: 'loginTime',
							title: '最后登录时间',
							width: 200,
							align: 'center',
							sortable: true
						},
						{
							field: 'status',
							title: '用户状态',
							width: 100,
							align: 'center',
							sortable: true
						},
						{
							field: 'rolename',
							title: '权限',
							width: 240,
							align: 'center',
							sortable: true
						},
						{
							field: 'caozuo',
							title: '操作',
							width: 260,
							align: 'center',
							formatter: function(value, row, index) {
								if(row.editing) {
								} else {
									var e = '<a href="#" onclick="editrow(this)"  style="color: dodgerblue;margin-right:5px">修改</a>';
									var d = '<a href="#" onclick="deleterow(this)" style="color: dodgerblue;margin-right:5px">删除</a>';
									var x = '<a href="#" onclick="saverow(this)"  style="color: dodgerblue;margin-right:5px">详情</a>';
									var p = '<a href="#" onclick="cancelrow(this)"  style="color: dodgerblue;">初始化密码</a>';
									return e+d+x+p;
								}
							}
						}
					]
				]
			});
		});

		function getRowIndex(target) {
			var tr = $(target).closest('tr.datagrid-row');
			return parseInt(tr.attr('datagrid-row-index'));
		}

		function editrow(target) {
			$('#dg').datagrid('beginEdit', getRowIndex(target));
			$('#dlg').window('open');
		}
		function saverow(target){
			$('#dg').datagrid('endEdit', getRowIndex(target));
			$('#dlg1').window('open');
		}
		function cancelrow(target){
			$('#dg').datagrid('cancelEdit', getRowIndex(target));
			$('#dlg2').window('open');
		}

		function deleterow(target) {
			$.messager.confirm('提示信息', '删除用户将导致该用户无法进入系统，是否删除?', function(r) {
				if(r) {
					$('#dg').datagrid('deleteRow', getRowIndex(target));
				}
			});
		}
		
		//添加一行数据 
	 $('.add_list1').click(function(){
	 	$('#dg').datagrid('insertRow',{
		    index: 11,  // 索引从0开始
		    row: {
		        userCode: '111111111111',
		        userName: '张亮',
		        email: 'yulidan@cnpc.com.cn',
		        mobilePhone: '15054531068',
		        phone: '010-123456789',
		        orgName: '华油信通集团事业部',
		        positionName: '一般监控人员',
		        loginTime: '2015-07-27 12:44:54',
		        status: '1',
		        rolename: '普通用户'
		    }
		});
	 })
	</script>

</html>