<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<link rel="stylesheet" type="text/css" href="../css/easyui.css">
	<link rel="stylesheet" type="text/css" href="../css/icon.css">
	<link rel="stylesheet" type="text/css" href="../css/demo.css">
	<link rel="stylesheet" type="text/css" href="../css/index.css">
	<link rel="stylesheet" type="text/css" href="../css/other.css">
	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/jquery.easyui.min.js"></script>
	<script type="text/javascript" src="../js/fenye.js"></script>
	<script type="text/javascript" src="../js/loading.js"></script>
	<body>
		<div class="easyui-layout" data-options="fit:true">
			<p class="title" style="height:3%;box-sizing: border-box; padding:14px 0 0 10px;margin: 0px;">当前位置：
			    <a href="#" style="color: dodgerblue;" class="remove">集团公司</a>
		    </p>
			<table border="0" cellspacing="0" cellpadding="0" class="table_layout clear_box">
				<tr>
					<td>考核方式：</td>
					<td>
						<select class="select easyui-combobox">
							<option value="1">比率方式</option>
							<option value="2">计算方式</option>
						</select>
					</td>
					<td>统计类型：</td>
					<td>
						<select class="select" id="select_value" onchange="getSelect()">
							<option value="0">年统计</option>
							<option value="1">季度统计</option>
							<option value="2">月统计</option>
						</select>
					</td>
					<td>年度：</td>
					<td>
						<select class="select easyui-combobox">
							<option value="1">2017</option>
							<option value="2">2016</option>
							<option value="3">2015</option>
							<option value="4">2014</option>
						</select>
					</td>
					<td class="quarter" style="display: none;">季度</td>
					<td class="quarter" style="display: none;">
						<select class="select easyui-combobox">
							<option value="1">一季度</option>
							<option value="2">二季度</option>
							<option value="3">三季度</option>
							<option value="4">四季度</option>
						</select>
					</td>
					<td class="mouth" style="display: none;">月份</td>
					<td class="mouth" style="display: none;">
						<select class="select easyui-combobox">
							<option value="1">一月</option>
							<option value="2">二月</option>
							<option value="3">三月</option>
							<option value="4">四月</option>
							<option value="5">五月</option>
							<option value="6">六月</option>
							<option value="7">七月</option>
							<option value="8">八月</option>
							<option value="9">九月</option>
							<option value="10">十月</option>
							<option value="11">十一月</option>
							<option value="12">十二月</option>
						</select>
					</td>
					<td>权限设置：</td>
					<td>
						<input type="text" value="40,30,30"/>
					</td>
					<td colspan="3">
						<span class="easyui-linkbutton" onclick="alert('#w')">权限设置</span>
						<span class="easyui-linkbutton" data-options="iconCls:'icon-search'" onclick="refreshbtn('#dg')">查询</span>
						<span class="easyui-linkbutton" data-options="iconCls:'icon-cz_reset'"  onclick="clearSearch('#dg')">重置</span>							
						<span class="easyui-linkbutton clear_btn" data-options="iconCls:'icon-return'"  onclick="back('.box_tab')">返回上一级</span>
						<span style="cursor: pointer;" onclick="alert('#w1')" class="kaohe"><i class="ihelp"></i>考核算法说明</span>
					</td>
				</tr>
			</table>
			<div class="box_tab" style="width:100%;height:85%">
			    <div class="div-dg dg_tab" style="width:100%;height:85%">
				     <table id="dg" class="easyui-datagrid load" style="width:100%;height:85%" data-options="singleSelect:false,collapsible:false,rownumbers:true,pagination:true,pageList:[5,10,15,20],url:'../json/safe_eleve.json',method:'get'"></table>
				</div>
				<div class="div-dg1 dg_tab" style="display: none;width:100%;height:85%">
					<table id="dg1" class="easyui-datagrid load" style="width:100%;height:85%" data-options="singleSelect:false,collapsible:false,rownumbers:true,pagination:true,pageList:[5,10,15,20],url:'../json/safe_eleve_child1.json',method:'get'"></table>
				</div>
				<div class="div-dg2 dg_tab" style="display: none;width:100%;height:85%">
					<table id="dg2" class="easyui-datagrid load" style="width:100%;height:85%" data-options="singleSelect:false,collapsible:false,rownumbers:true,pagination:true,pageList:[5,10,15,20],url:'../json/safe_eleve_child2.json',method:'get'"></table>
				</div>
				<div class="div-dg3 dg_tab" style="display: none;width:100%;height:85%">
					<table id="dg3" class="easyui-datagrid load" style="width:100%;height:85%" data-options="singleSelect:false,collapsible:false,rownumbers:true,pagination:true,pageList:[5,10,15,20],url:'../json/safe_eleve_child3.json',method:'get'">
						<thead>
							<tr>
								<th data-options="field:'ORG_NAME',width: 150">单位</th>
								<th data-options="field:'LEVELNAME',width: 300">等级名称</th>
								<th data-options="field:'RISK_VALUE',width: 300">风险值</th>
								<th data-options="field:'ALARM',width: 300">报警次数</th>
								<th data-options="field:'WEIZHANG',width: 300">违章次数</th>
								<th data-options="field:'SHIGU',width: 300">事故次数</th>
								<th data-options="field:'MILE',width: 300">公里数</th>
							</tr>
						</thead>
					</table>
				</div>
			</div>	
			<!--模态框-->
			<div id='w' class="easyui-window" closed='true' title="权重设置" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'" style="width:350px;height:200px;">
				<table border="0" cellspacing="0" cellpadding="0" class="tab_win">
					<tr>
						<td>事故权重设置：</td>
						<td><input type="text" /></td>
					</tr>
					<tr>
						<td>违章权重设置：</td>
						<td><input type="text" /></td>
					</tr>
					<tr>
						<td>报警权重设置：</td>
						<td><input type="text" /></td>
					</tr>
				</table>
				<div style="width: 100%; text-align: center;">
					<a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w').window('open')">确定</a>
					<a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w').window('close')">关闭</a>
				</div>
			</div>
			<div id='w1' class="easyui-window" closed='true' title="考核算法说明" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'" style="width:650px;height:430px;">
				<div class="panel" style="display: block; width: 636px;">
					<div style="width: 626px; height:430px; padding: 5px;" title="" class="panel-body">
						<div>
							单位交通安全等级分为甲级、乙级、丙级三级。<br>考核方法（计数方式）：<br>风险值：(事故个数*事故权重+违章个数*违章权重+违规个数*违规权重)/100<br>
							<table width="590px" border="0" cellpadding="3" cellspacing="1" align="center" style="background-color: #DCDCDC;">
								<tbody>
									<tr style="text-align: center; BACKGROUND-COLOR: #fafafa; font-weight: bold">
										<td rowspan="2"></td>
										<td colspan="4">每百车事故个数</td>
										<td rowspan="2">每百车违章个数</td>
										<td rowspan="2">每百车报警个数</td>
										<td rowspan="2">行驶公里数</td>
									</tr>
									<tr style="text-align: center; BACKGROUND-COLOR: #fafafa; font-weight: bold">
										<td>特大事故</td>
										<td>重大事故</td>
										<td>一般事故</td>
										<td>轻微事故</td>
									</tr>
									<tr style="text-align: center; BACKGROUND-COLOR: #FFFFFF; ">
										<td>甲级</td>
										<td>0</td>
										<td>0</td>
										<td>0</td>
										<td>&lt;1</td>
										<td>&lt;1</td>
										<td>≤12</td>
										<td>&gt;50000</td>
									</tr>
									<tr style="text-align: center; BACKGROUND-COLOR: #FFFFFF; ">
										<td>乙级</td>
										<td>0</td>
										<td>0</td>
										<td>0</td>
										<td>≤2</td>
										<td>≤3</td>
										<td>≤120</td>
										<td>&gt;0</td>
									</tr>
									<tr style="text-align: center; BACKGROUND-COLOR: #FFFFFF; ">
										<td>丙级</td>
										<td>&gt;0</td>
										<td>&gt;0</td>
										<td>&gt;0</td>
										<td>&gt;2</td>
										<td>&gt;3</td>
										<td>&gt;120</td>
										<td>-</td>
									</tr>
								</tbody>
							</table><br>考核方法（百万公里比率方式）：<br>风险值：(事故率*事故权重+违章率*违章权重+违规率*违规权重)/100<br>

							<table width="590px" border="0" cellpadding="3" cellspacing="1" align="center" style="background-color: #DCDCDC;">
								<tbody>
									<tr style="text-align: center; BACKGROUND-COLOR: #fafafa; font-weight: bold">
										<td rowspan="2"></td>
										<td colspan="4">百万公里事故率</td>
										<td rowspan="2">百万公里违章率</td>
										<td rowspan="2">百万公里违规率</td>
										<td rowspan="2">行驶公里数</td>
									</tr>
									<tr style="text-align: center; BACKGROUND-COLOR: #fafafa; font-weight: bold">
										<td>特大事故</td>
										<td>重大事故</td>
										<td>一般事故</td>
										<td>轻微事故</td>
									</tr>
									<tr style="text-align: center; BACKGROUND-COLOR: #FFFFFF; ">
										<td>甲级</td>
										<td>0</td>
										<td>0</td>
										<td>0</td>
										<td>&lt;20</td>
										<td>&lt;20</td>
										<td>≤240</td>
										<td>&gt;50000</td>
									</tr>
									<tr style="text-align: center; BACKGROUND-COLOR: #FFFFFF; ">
										<td>乙级</td>
										<td>0</td>
										<td>0</td>
										<td>0</td>
										<td>≤40</td>
										<td>≤60</td>
										<td>≤2400</td>
										<td>&gt;0</td>
									</tr>
									<tr style="text-align: center; BACKGROUND-COLOR: #FFFFFF; ">
										<td>丙级</td>
										<td>&gt;0</td>
										<td>&gt;0</td>
										<td>&gt;0</td>
										<td>&gt;40</td>
										<td>&gt;60</td>
										<td>&gt;2400</td>
										<td>-</td>
									</tr>
								</tbody>
							</table><br>百万公里事故率（特大事故、重大事故、一般事故、轻微事故单独计算）:<br>事故数乘以1000000除以实际的公里数。公式如下： R3=B*1000000/V 公式中V为车辆实际行驶的公里数。<br>百万公里违章率:违章数乘以1000000除以实际的公里数。公式如下：R4=B*1000000/V<br>百万公里违规率:违规数乘以1000000除以实际的公里数。公式如下：R5=B*1000000/V<br>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
	<script type="text/javascript">
		$(function() {
			$('#dg').datagrid({
				idField: 'itemid',
				fitColumns:true,
				columns: [
					[{
							field: 'ORG_NAME',
							title: '单位',
							width: 200,
							formatter: function(value, row, index) {
								return '<a style="color:blue" class="a_text" onclick="tab_mes()" href="#">' + row.ORG_NAME + '</a>';

							}
						},
						{
							field: 'LEVELNAME',
							title: '等级名称',
							width: 200
						},
						{
							field: 'RISK_VALUE',
							title: '风险值',
							width: 200
						},
						{
							field: 'ALARM',
							title: '报警次数',
							width: 200
						},
						{
							field: 'WEIZHANG',
							title: '违章次数',
							width: 200
						},
						{
							field: 'SHIGU',
							title: '事故次数',
							width: 200
						},
						{
							field: 'MILE',
							title: '公里数',
							width: 200
						}
					]
				]
			});
			$('#dg1').datagrid({
				idField: 'itemid',
				fitColumns:true,
				columns: [
					[{
							field: 'ORG_NAME',
							title: '单位',
							width:200,
							formatter: function(value, row, index) {
								return '<a style="color:blue" class="a_text" onclick="tab_mes1()" href="#">' + row.ORG_NAME + '</a>';

							}
						},
						{
							field: 'LEVELNAME',
							title: '等级名称',
							width: 200
						},
						{
							field: 'RISK_VALUE',
							title: '风险值',
							width: 200
						},
						{
							field: 'ALARM',
							title: '报警次数',
							width: 200
						},
						{
							field: 'WEIZHANG',
							title: '违章次数',
							width: 200
						},
						{
							field: 'SHIGU',
							title: '事故次数',
							width: 200
						},
						{
							field: 'MILE',
							title: '公里数',
							width: 200
						}
					]
				]
			});
			$('#dg2').datagrid({
				idField: 'itemid',
				fitColumns:true,
				columns: [
					[{
							field: 'ORG_NAME',
							title: '单位',
							width: 200,
							formatter: function(value, row, index) {
								return '<a style="color:blue" class="a_text" onclick="tab_mes2()" href="#">' + row.ORG_NAME + '</a>';

							}
						},
						{
							field: 'LEVELNAME',
							title: '等级名称',
							width: 200
						},
						{
							field: 'RISK_VALUE',
							title: '风险值',
							width: 200
						},
						{
							field: 'ALARM',
							title: '报警次数',
							width: 200
						},
						{
							field: 'WEIZHANG',
							title: '违章次数',
							width: 200
						},
						{
							field: 'SHIGU',
							title: '事故次数',
							width: 200
						},
						{
							field: 'MILE',
							title: '公里数',
							width: 200
						}
					]
				]
			});

		});
		function tab_mes(){
			$('.div-dg').hide()
			$('.div-dg1').show()
			$('#dg1').datagrid("reload");
//			$('.a_text').each(function() {
//				$(this).mouseout(function() {
//					var a_text = $(this).html();
//					var a ="<a href='#' class='remove1' onclick='remove1()' style='color: dodgerblue;'>/" + a_text + "</a>";
//					$('.title').append(a);	
//				})
//			})
		}
		function tab_mes1(){
			$('.div-dg2').show()
			$('.div-dg2').siblings().hide()
			$('#dg2').datagrid("reload");
//			$('.a_text').each(function() {
//				$(this).mouseout(function() {
//					var a_text = $(this).html();
//					var a ="<a href='#' class='remove2' onclick='remove2()' style='color: dodgerblue;'>/" + a_text + "</a>";
//					$('.title').append(a);
//				})
//			})

			}
		function tab_mes2(){
			$('.div-dg3').show()
			$('.div-dg3').siblings().hide()
			$('#dg3').datagrid("reload");
//			$('.a_text').each(function() {
//				$(this).mouseout(function() {
//					var a_text = $(this).html();
//					var a ="<a href='#' class='remove3' style='color: dodgerblue;'>/" + a_text + "</a>";
//					$('.title').append(a);
//				})
//			})
		}	
//	返回上一级
		$('.remove').click(function(){
			$('.remove').nextAll().remove()
			$('.div-dg').show();
			$('.div-dg').nextAll().hide()
			$('#dg').datagrid("reload");
		})
		function remove1() {
			$('.remove1').nextAll().remove()
			$('.div-dg1').show();
			$('.div-dg1').nextAll().hide()
			$('#dg1').datagrid("reload");
		}
		
		function remove2() {
			$('.remove3').remove()
			$('.div-dg2').show();
			$('.div-dg3').hide();
			$('#dg2').datagrid("reload");
		}
//	返回上一级
		function back(id){
			var divLen = $(id).find(".dg_tab").length;
			var Thisdiv = 0;
			for(var i = 0; i < divLen; i++) {
				if($(id).find(".dg_tab").eq(i).css("display") != "none") {
					Thisdiv = i;
				};
			};
			if(Thisdiv != 0) {
				$(id).find(".dg_tab").hide().eq(Thisdiv - 1).show();
			};
			$('.load').datagrid("reload");
		};
	   function getSelect(){
	   	var a = document.getElementById("select_value").value;
	   	 if(a == '0'){
	   	 	$('.mouth').hide();
	   	 	$('.quarter').hide();
	   	 }else if(a == '1'){
	   	 	$('.mouth').hide();
	   	 	$('.quarter').show();
	   	 }else if(a == '2'){
	   	 	$('.mouth').show();
	   	 	$('.quarter').hide();
	   	 }
	  };
	</script>

</html>