<!DOCTYPE html>
<html>

<head>
    <meta charset=utf-8 />
    <title>禁止驶出报警</title>
    <link rel="import" href="../../public.html">
    <script type="text/javascript" src="../../js/loading.js"></script>
    <script src="../../js/fenye.js"></script>
</head>

<body class="easyui-layout">
    <!--模态框-->

    <div id='w' class="easyui-window" closed='true' title="添加" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'"
        style="width:550px;height:240px; padding: 5px">
        <form>
            <table width="100%">
                <input type="hidden" id="fatigueDrivingId" value="">
                <tbody>
                    <tr height="40px">
                        <td> 区域类型：</td>
                        <td id="tdAreaType">
                            <select id="areaType" class="easyui-combobox easyui-validatebox combobox-f combo-f validatebox-text" data-options="required:true"
                                style="width: 130px; display: none;" editable="false">
                                <option value="0">业务点</option>
                                <option value="1">业务区</option>
                            </select>
                        </td>
                        <td colspan="" id="JYareaName">
                            <input type="text" id="areaName" class="easyui-validatebox textbox validatebox-text validatebox-invalid" data-options="required:true"
                                style="width:126px;height:22px" readonly="" title="">

                            <div id="div8" style="display: inline;">
                                <td align="left">
                                    <button style='margin:0;' id="selectArriveAddressbtn" type="button" class="easyui-linkbutton clear_btn" data-options="iconCls:'icon-add'"
                                        onclick="alert('#w3')">选择业务点</button>
                                </td>
                            </div>
                        </td>
                    </tr>
                    <tr height="40px">
                        <td width="20%"> 作用对象：</td>
                        <td width="30%" id="tdEfectObject">
                            <select id="addEfectObject" class="easyui-combobox easyui-validatebox combobox-f combo-f validatebox-text" data-options="required:true"
                                style="width: 130px; display: none;" editable="false">
                                <option value="0">组织机构</option>
                                <option value="1">车辆</option>
                            </select>
                        </td>

                        <td width="10%"> 组织机构: </td>
                        <td width="30%">
                            <input type="text" id="cc" class="validatebox-text easyui-combotree combo-text" autocomplete="on" data-options="url:'../../json/index_tree.json',method:'get',required:false"
                                style="width:130px;" />
                        </td>
                    </tr>

                    <tr id="stop_timeTR" height="40px">
                        <td width="20%"> 报警距离(m)：</td>
                        <td width="30%">
                            <input type="text" id="stop_time" class="easyui-numberbox easyui-validatebox numberbox numberbox-f validatebox-text validatebox-invalid"
                                data-options="required:true,validType:'range[0,999999999]'" maxlength="9" placeholder="时长范围无上限"
                                style="width: 120px; height: 23px; line-height: 23px;" title="">
                        </td>

                        <td width="20%"> 备注：</td>
                        <td width="30%">
                            <input type="text" id="add_remark" class="easyui-validatebox textbox validatebox-text" style="width:126px;height:22px;" maxlength="20">
                        </td>
                    </tr>
                </tbody>
            </table>
        </form>

        <div id="addRoadCondition-button" style="text-align:center;" class="dialog-button">
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w').window('close')">确定</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w').window('close')">关闭</a>
        </div>
    </div>
    <div id='w2' class="easyui-window" closed='true' title="修改" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'"
        style="width:550px;height:240px; padding: 5px">
        <form>
            <table width="100%">
                <input type="hidden" id="fatigueDrivingId1" value="">
                <tbody>
                    <tr height="40px">
                        <td> 区域类型：</td>
                        <td id="tdAreaType1">
                            <select id="areaType1" class="easyui-combobox easyui-validatebox combobox-f combo-f validatebox-text" data-options="required:true"
                                style="width: 130px; display: none;" editable="false">
                                <option value="0">业务点</option>
                                <option value="1">业务区</option>
                            </select>
                        </td>
                        <td colspan="" id="JYareaName1">
                            <input type="text" id="areaName" class="easyui-validatebox textbox validatebox-text validatebox-invalid" data-options="required:true"
                                style="width:126px;height:22px" readonly="" title="">

                            <div id="div7" style="display: inline;">
                                <td align="left">
                                    <button style='margin:0;' id="selectArriveAddressbtn1" type="button" class="easyui-linkbutton clear_btn" data-options="iconCls:'icon-add'"
                                        onclick="alert('#w3')">选择业务点</button>
                                </td>
                            </div>
                        </td>
                    </tr>
                    <tr height="40px">
                        <td width="20%"> 作用对象：</td>
                        <td width="30%" id="tdEfectObject1">
                            <select id="addEfectObject1" class="easyui-combobox easyui-validatebox combobox-f combo-f validatebox-text" data-options="required:true"
                                style="width: 130px; display: none;" editable="false">
                                <option value="0">组织机构</option>
                                <option value="1">车辆</option>
                            </select>
                        </td>

                        <td> 组织机构: </td>
                        <td>
                            <input type="text" id="cc1" class="validatebox-text easyui-combotree combo-text" autocomplete="on" data-options="url:'../../json/index_tree.json',method:'get',required:false"
                                style="width:130px;" />
                        </td>
                    </tr>

                    <tr id="stop_timeTR1" height="40px">
                       
                        <td>报警距离(m)：</td>
                        <td>
                            <input type="text" id="add_BusinessPointRadius1" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                                data-options="required:true,validType:['integer','length[1,6]']" style="width:126px;height:22px">
                        </td>
                        <td> 备注：</td>
                        <td>
                            <input type="text" id="add_remark1" class="easyui-validatebox textbox validatebox-text" style="width:126px;height:22px;"
                                maxlength="20">
                        </td>

                    </tr>
                </tbody>
            </table>
        </form>

        <div id="addRoadCondition-button1" style="text-align:center;" class="dialog-button">
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w2').window('close')">确定</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w2').window('close')">关闭</a>
        </div>
    </div>
    <div id='w3' class="easyui-window" closed='true' title="业务区选择" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'"
        style="width:735px;height:442px;">
        <div>
            <table border="0" cellspacing="0" cellpadding="0" class="table_layout clear_box">
                <tr>
                    <td> 创建单位: </td>
                    <td>
                        <input type="text" id="cc" class="validatebox-text easyui-combotree combo-text" autocomplete="on" data-options="url:'../../json/index_tree.json',method:'get',required:false"
                            style="width:130px;" />
                    </td>
                    <td>业务区类型：</td>
                    <td colspan="2">
                        <select class="easyui-combobox width" name="language">
                            <option value="ar">全部</option>
                            <option value="bg">禁止驶入范围</option>
                            <option value="ca">禁止驶出范围</option>
                            <option value="zh-cht">盲区</option>
                            <option value="cs">风险区</option>
                            <option value="da">允许停车范围</option>
                            <option value="nl">禁止停车范围</option>
                            <option value="en">敏感区域</option>
                            <option value="et">小车队</option>
                        </select>
                    </td>
                    <td>业务区名称：
                        <input type="text" id="idNumber" class="easyui-validatebox textbox validatebox-text" style="width:100px;" disabled="false">
                    </td>
                    <td colspan="2">
                        <span class="easyui-linkbutton" data-options="iconCls:'icon-search'" onclick="refreshbtn('#dg')">查询</span>
                    </td>
                </tr>
            </table>
            <table id="dg" title="" class="easyui-datagrid" style="width:100%;height:320px" data-options="fitColumns:true,rownumbers:true,singleSelect:true,pagination:true,pageList:[5,10,15,20],url:'../../json/point_select.json',method:'get'">
                <thead>
                    <tr>
                        <th data-options="field:'businesAddressName',width:180">业务点名称</th>
                        <th data-options="field:'addressDetail',width:150">允许停车距离(米)</th>
                        <th data-options="field:'businesAddressType',width:120">业务点类型</th>
                        <th data-options="field:'cityName',width:120">创建人</th>
                        <th data-options="field:'ciyName',width:180">单位</th>
                    </tr>
                </thead>
            </table>
        </div>
        <div style="width: 100%; text-align: center;">
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w3').window('close')">确定</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w3').window('close')">关闭</a>
        </div>
    </div>

    <div id='w1' class="easyui-window" closed='true' title="提示信息" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'"
        style="width:300px;height:150px;">
        <div style="padding: 10px;margin-bottom:15px;">
            请选择要操作的数据！
        </div>

        <div style="text-align:center;padding:5px">
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w1').window('close')">确定</a>
        </div>
    </div>


    <div id="vblackdataTablesearch" style="padding: 5px; height: auto" class="datagrid-toolbar clear_box">
        <table>
            <tbody>
                <tr>
                    <td>作用对象：
                        <select id="efectObject" class="easyui-combobox combobox-f combo-f" style="width: 100px;" editable="false">
                            <option value="">全部</option>
                            <option value="0">组织机构</option>
                            <option value="1">车辆</option>
                        </select>
                    </td>
                    <td>组织机构：
                        <input type="text" id="cc" class="validatebox-text easyui-combotree combo-text" autocomplete="on" data-options="url:'../../json/index_tree.json',method:'get',required:false"
                            style="width:130px;" />
                        <span class="combo-clear qingchu" style="display: block; right: 45px;"></span>
                    </td>
                    <td>车牌号码：
                        <input type="text" id="idNumber" class="easyui-validatebox textbox validatebox-text" style="width:100px;height:22px">
                    </td>
                    <td>
                        <span class="easyui-linkbutton" data-options="iconCls:'icon-search'" onclick="refreshbtn('#dg')">查询</span>
                        <a class="easyui-linkbutton " data-options="iconCls:'icon-search'" onclick="clearSearch('#dg')">重置</a>
                        <a href="#" id="amdataTable_dealbtn" class="easyui-linkbutton" data-options="iconCls:'icon-add'" onclick="$('#w').window('open')">添加</a>
                        <a href="#" id="amdataTable_dealbtn1" class="easyui-linkbutton" data-options="iconCls:'icon-edit'" onclick="edit()">修改</a>
                        <a href="#" id="amdataTable_dealbtn" class="easyui-linkbutton" data-options="iconCls:'icon-remove'" onclick="deleteRows();">删除</a>
                        <a href="#" id="exportExcel" class="easyui-linkbutton ">
                            <span class="l-btn-left l-btn-icon-left">
                                <span class="l-btn-icon" style="display:inline-block; width:18px;height:18px;">
                                    <img src="../../images/excel.png" alt="" style="width:100%;height:100%;" />
                                </span>
                                &nbsp;导出
                            </span>
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>


        <table id="dg" title="" style="width:100%;height:700px;" data-options="onRowContextMenu: onRowContextMenu,rownumbers:true,fitColumns:true,singleSelect:false,pagination:true,url:'../../json/alarm_record.json',method:'get'">
            <thead>
                <tr>
                    <th data-options="field:'ck',checkbox:true"></th>
                    <th data-options="field:'vehicleId',width:100,align:'center'">区域名称</th>
                    <th data-options="field:'idNumber',width:100,align:'center'">报警范围(m)</th>
                    <th data-options="field:'orgCode',width:100,align:'center'">作用对象</th>
                    <th data-options="field:'alarmTypeName',width:100,align:'center'">作用对象值</th>
                    <th data-options="field:'null',width:100,align:'center'">备注</th>
                </tr>
            </thead>
        </table>
    </div>
    <script>
        //   查询		
        function query() {
            $("#dg1").datagrid("load", sy.serializeObject($("#searchForm").form())); //将searchForm表单内的元素序列为对象传递到后台
        }

        function onRowContextMenu(e, rowIndex, rowData) {
            e.preventDefault();
            var selected = $("#dg").datagrid('getRows'); //获取所有行集合对象			
            selected[rowIndex].id; //index为当前右键行的索引，指向当前行对象			
            $('#mm').menu('show', {
                left: e.pageX + 10,
                top: e.pageY
            });
        }

        function edit() {
            var editdData = $("#dg").datagrid('getChecked');
            if (editdData == "") {
                $("#w1").window('open');
            } else {
                $("#w2").window('open');
            }
        }

        function deleteRows() {
            var deletedData = $("#dg").datagrid('getChecked');
            if (deletedData == "") {
                $("#w1").window('open')
            }
            for (var i = deletedData.length - 1; i >= 0; i--) {
                var rowIndex = $("#dg").datagrid('getRowIndex', deletedData[i]);
                if (deletedData.length > 0) {
                    $("#dg").datagrid('deleteRow', rowIndex)
                }

            }
        }
        
    </script>
</body>

</html>