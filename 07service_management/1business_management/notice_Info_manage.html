<!DOCTYPE html>
<html>

<head>
    <meta charset=utf-8 />
    <title>公告信息管理</title>
    <link rel="import" href="../../public.html">
    <script type="text/javascript" src="../../js/loading.js"></script>
    <script src="../../js/jquery.region.js"></script>
    <script src="../../js/fenye.js"></script>
</head>

<body class="easyui-layout">
    <!--模态框-->

    <div id='w' class="easyui-window" closed='true' title="新增公告信息" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'"
        style="width:540px;height:280px; padding: 5px">

        <table style="width:100%">
            <tbody>

                <tr>
                    <td style="width:40%;text-align:left">
                        <span style="width:30%;text-align:left">标题：</span>
                        <input type="text" class="easyui-numberbox easyui-validatebox numberbox numberbox-f validatebox-text" data-options="required:true,min:1,max:10"
                            id="supplierName" style="width: 150px; height: 22px;text-align:left; line-height: 22px;" title="">
                    </td>
                    <td style="width:60%;text-align:center">
                        <span style="width:30%;text-align:left">所属单位：</span>
                        <input type="text" id="cc" class="validatebox-text easyui-combotree combo-text" autocomplete="on" data-options="url:'../../json/index_tree.json',method:'get',required:false"
                            style="width:150px;" />
                    </td>
                </tr>

                <tr height="30px" id="JYcredcertDate">
                    <td style="width:50%;text-align:left">
                        <span style="width:30%;text-align:left">发布时间：</span>
                        <input class="easyui-datebox easyui-validatebox validatebox-text validatebox-invalid datebox-f combo-f" data-options="required:true"
                            id="startDate" style="width: 150px; display: none;" comboname="credcertDate">
                    </td>
                    <td style="width:50%;text-align:center">
                        <span style="width:30%;text-align:left">截止时间：</span>
                        <input class="easyui-datebox easyui-validatebox validatebox-text validatebox-invalid datebox-f combo-f" data-options="required:true"
                            id="endDate" style="width: 150px; display: none;" comboname="credcertDate">
                    </td>
                </tr>
            </tbody>

        </table>
        <tr>
            <span style="width:15%;text-align:left">内容：</span>
            <textarea id="content" name="content" rows="4" style="width:80%;margin-right: auto" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                data-options="required:true,validType:'length[0,300]'" placeholder="请输入公告内容..." title=""></textarea>
        </tr>
        <div id="addCred-button" style="text-align:center;padding:0px;margin-top:58px" class="dialog-button">
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w').window('close')">确定</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w').window('close')">关闭</a>
        </div>
    </div>
    <div id='w2' class="easyui-window" closed='true' title="修改供应商" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'"
        style="width:600px;height:300px; padding: 5px">

        <table style="width:100%">
            <tbody>

                <tr>
                    <td style="width:40%;text-align:left">
                        <span style="width:30%;text-align:left">标题：</span>
                        <input type="text" class="easyui-numberbox easyui-validatebox numberbox numberbox-f validatebox-text" data-options="required:true,min:1,max:10"
                            id="userName1" style="width: 150px; height: 22px; line-height: 22px;" title="">
                    </td>
                    <td style="width:60%;text-align:center">
                        <span style="width:35%;text-align:left">所属单位：</span>
                        <input type="text" id="cc1" class="validatebox-text easyui-combotree combo-text" autocomplete="on" data-options="url:'../../json/index_tree.json',method:'get',required:false"
                            style="width:150px;" />
                    </td>
                </tr>

                <tr height="30px">
                    <td style="width:50%;text-align:left">
                        <span style="width:30%;text-align:left">发布时间：</span>
                        <input class="easyui-datebox easyui-validatebox validatebox-text validatebox-invalid datebox-f combo-f" data-options="required:true"
                            id="startDate" style="width: 150px; display: none;" comboname="credcertDate">
                    </td>
                    <td style="width:50%;text-align:center">
                        <span style="width:30%;text-align:left">截止时间：</span>
                        <input class="easyui-datebox easyui-validatebox validatebox-text validatebox-invalid datebox-f combo-f" data-options="required:true"
                            id="endDate" style="width: 150px; display: none;" comboname="credcertDate">
                    </td>
                </tr>
            </tbody>

        </table>
        <tr>
            <span style="width:15%;text-align:left">内容：</span>
            <textarea id="content1" name="content" rows="4" style="width:80%;margin-right: auto" class="easyui-validatebox textbox validatebox-text validatebox-invalid"
                data-options="required:true,validType:'length[0,300]'" placeholder="请输入公告内容..." title=""></textarea>
        </tr>
        <div id="addCred-button1" style="text-align:center;padding:0px;margin-top:32px" class="dialog-button">
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w2').window('close')">确定</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w2').window('close')">关闭</a>
        </div>
    </div>

    <div id='w1' class="easyui-window" closed='true' title="提示信息" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'"
        style="width:300px;height:150px;">
        <div style="padding: 10px;margin-bottom:15px;">
            请选择要操作的数据！
        </div>

        <div style="text-align:center;padding:5px">
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w1').window('close')">确定</a>
        </div>
    </div>

    <div id="vblackdataTablesearch" style="padding: 5px; height: auto" class="datagrid-toolbar clear_box">
        <td>标题：</td>
        <td>
            <input type="text" class="easyui-numberbox" data-options="" id="clientName" style="width: 120px; height: 22px; line-height: 22px;"
                title="">
        </td>
        <td style="white-space:nowrap;">内容：</td>
        <td style="width:55px;">
            <input type="text" class="easyui-numberbox" data-options="" id="clientType" style="width: 120px; height: 22px; line-height: 22px;"
                title="">

        </td>
        单位：
        <!-- <div class="search"> -->
        <input type="text" id="cc" class="validatebox-text easyui-combotree combo-text" autocomplete="on" data-options="url:'../../json/index_tree.json',method:'get',required:false"
            style="width:150px;" />
        <span class="combo-clear qingchu" style="display: block; right: 45px;"></span>
        <!-- </div> -->

        <span class="easyui-linkbutton" data-options="iconCls:'icon-search'" onclick="refreshbtn('#dg')">查询</span>
        <a class="easyui-linkbutton " data-options="iconCls:'icon-search'" onclick="clearSearch('#dg')">重置</a>
        <br>
        <a href="#" id="amdataTable_dealbtn" class="easyui-linkbutton" data-options="iconCls:'icon-add'" onclick="$('#w').window('open')">添加</a>
        <a href="#" id="amdataTable_dealbtn" class="easyui-linkbutton" data-options="iconCls:'icon-edit'" onclick="edit()">补发</a>
        <a href="#" id="amdataTable_dealbtn" class="easyui-linkbutton" data-options="iconCls:'icon-remove'" onclick="deleteRows();">删除</a>
        <table id="dg" title="" style="width:100%;height:700px;" data-options="onRowContextMenu: onRowContextMenu,rownumbers:true,fitColumns:true,singleSelect:false,pagination:true,url:'../../json/weizhangxinxi.json',method:'get'">
            <thead>
                <tr>
                    <th data-options="field:'ck',checkbox:true"></th>
                    <th data-options="field:'orgName',width:100,align:'center'">标题</th>
                    <th data-options="field:'vioDesc',width:200,align:'center'">内容</th>
                    <th data-options="field:'userName',width:100,align:'center'">发布单位</th>
                    <th data-options="field:'score',width:100,align:'center'">发布人</th>
                    <th data-options="field:'recordTime',width:150,align:'center'">发布时间</th>
                    <th data-options="field:'vioTime',width:150,align:'center'">截止时间</th>
                </tr>
            </thead>
        </table>
    </div>
    <script>
        $('.box').region({
            url: '../../json/region.json'
        })
        $('.box1').region({
            url: '../../json/region.json'
        })
        //   查询		
        function query() {
            $("#dg1").datagrid("load", sy.serializeObject($("#searchForm").form())); //将searchForm表单内的元素序列为对象传递到后台
        }

        function onRowContextMenu(e, rowIndex, rowData) {
            e.preventDefault();
            var selected = $("#dg").datagrid('getRows'); //获取所有行集合对象			
            selected[rowIndex].id; //index为当前右键行的索引，指向当前行对象			
            $('#mm').menu('show', {
                left: e.pageX + 10,
                top: e.pageY
            });
        }

        function edit() {
            var editdData = $("#dg").datagrid('getChecked');
            if (editdData == "") {
                $("#w1").window('open');
            } else {
                $("#w2").window('open');
            }
        }

        function deleteRows() {
            var deletedData = $("#dg").datagrid('getChecked');
            if (deletedData == "") {
                $("#w1").window('open')
            }
            for (var i = deletedData.length - 1; i >= 0; i--) {
                var rowIndex = $("#dg").datagrid('getRowIndex', deletedData[i]);
                if (deletedData.length > 0) {
                    $("#dg").datagrid('deleteRow', rowIndex)
                }

            }
        }
    </script>
</body>

</html>