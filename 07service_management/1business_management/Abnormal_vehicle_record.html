<!DOCTYPE html>
<html>

<head>
    <meta charset=utf-8 />
    <title>异常车辆记录</title>
    <link rel="import" href="../../public.html">
    <script type="text/javascript" src="../../js/loading.js"></script>
    <script src="../../js/fenye.js"></script>
</head>

<body class="easyui-layout">
    <!--模态框-->

    <div id='w' class="easyui-window" closed='true' title="新增缴费管理" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'"
        style="width:600px;height:300px; padding: 5px">

        <table style="width:100%">
            <tbody>
                <tr height="30px" id="JYcredName">
                    <td>
                        <span style="width:40%;text-align:left">单位：</span>
                        <input type="text" id="cc" class="validatebox-text easyui-combotree combo-text" autocomplete="on" data-options="url:'../../json/index_tree.json',method:'get',required:false"
                            style="width:150px;" />
                    </td>
                    <td style="width:60%;text-align:center">
                        <span style="width:40%;text-align:left">缴费模式：</span>

                        <select id="credType" class="easyui-combobox easyui-validatebox combobox-f combo-f validatebox-text" data-options="required:false"
                            style="width: 150px; display: none;" editable="false" comboname="credType">
                            <option value="">请选择缴费模式</option>
                            <option value="">单卡</option>
                            <option value="">批量</option>
                        </select>
                    </td>
                </tr>
                <tr id="trCredLvl">
                    <td style="width:40%;text-align:left">
                        <span style="width:40%;text-align:left">付费模式:</span>
                        <select id="credLvl" class="easyui-combobox easyui-validatebox combobox-f combo-f validatebox-text" data-options="required:false"
                            style="width: 150px; display: none;" editable="false" comboname="credLvl">
                            <option value="A1" selected="">请选择</option>
                            <option value="A2">包月</option>
                            <option value="A3">包年</option>
                        </select>
                    </td>
                    <td style="width:60%;text-align:center">
                        <span style="width:40%;text-align:left">SIM卡号：</span>
                        <input type="text" class="easyui-numberbox easyui-validatebox numberbox numberbox-f validatebox-text" data-options="required:true,min:1,max:10"
                            id="simID" style="width: 150px; height: 22px; line-height: 22px;" numberboxname="credcertExpired"
                            title="">
                    </td>
                </tr>
                <tr id="tdDangerCategory">
                    <td style="width:40%;text-align:left">
                        <span style="width:40%;text-align:left">批次号：</span>
                        <input type="text" class="easyui-numberbox easyui-validatebox numberbox numberbox-f validatebox-text" data-options="required:true,min:1,max:10"
                            id="credcertExpired" style="width: 150px; height: 22px; line-height: 22px;" numberboxname="credcertExpired"
                            title="">
                    </td>
                    <td style="width:60%;text-align:center">
                        <span style="width:40%;text-align:left">SIM数量：</span>
                        <input type="text" class="easyui-validatebox textbox validatebox-text validatebox-invalid" data-options="required:true" name="drivingLicensesInfo"
                            id="simNum" style="width:150px;height: 20px; line-height: 20px;">
                    </td>
                </tr>

                <tr height="30px" id="JYcredcertDate">
                    <td style="width:40%;text-align:left">
                        <span style="width:40%;text-align:left">缴费时间：</span>
                        <input class="easyui-datebox easyui-validatebox validatebox-text validatebox-invalid datebox-f combo-f" data-options="required:true"
                            id="credcertDate" style="width: 150px; display: none;" comboname="credcertDate">
                    </td>
                    <td style="width:60%;text-align:center">
                        <span style="width:40%;text-align:left">缴费单价：</span>
                        <input type="text" class="easyui-validatebox textbox validatebox-text validatebox-invalid" data-options="required:true" name="drivingLicensesInfo"
                            id="money" style="width:150px;height: 20px; line-height: 20px;">
                    </td>
                </tr>
                <tr id="JYcredcertInspectDate">
                    <td style="width:40%;text-align:left">
                        <span style="width:40%;text-align:left">缴费总额：</span>
                        <input type="text" class="easyui-validatebox textbox validatebox-text validatebox-invalid" data-options="required:true" name="drivingLicensesInfo"
                            id="totalmoney" style="width:150px;height: 20px; line-height: 20px;">
                    </td>
                    <td style="width:60%;text-align:center">
                        <span style="width:40%;text-align:left">服务开始时间：</span>
                        <input class="easyui-datebox easyui-validatebox validatebox-text validatebox-invalid datebox-f combo-f" data-options="required:true"
                            id="startDate" style="width: 150px; display: none;" comboname="credcertDate">
                    </td>
                </tr>
                <tr id="">
                    <td style="width:50%;text-align:left">
                        <span style="width:40%;text-align:left">服务结束时间：</span>
                        <input class="easyui-datebox easyui-validatebox validatebox-text validatebox-invalid datebox-f combo-f" data-options="required:true"
                            id="endDate" style="width: 150px; display: none;" comboname="credcertDate">
                    </td>
                    <td style="width:60%;text-align:center">
                        <span style="width:40%;text-align:left">出纳姓名：</span>
                        <input type="text" class="easyui-validatebox textbox validatebox-text validatebox-invalid" data-options="required:true" name="drivingLicensesInfo"
                            id="name" style="width:150px;height: 20px; line-height: 20px;">
                    </td>
                </tr>
                <tr id="">
                    <td style="width:40%;text-align:left">
                        <span style="width:40%;text-align:left">出纳电话：</span>
                        <input type="text" class="easyui-validatebox textbox validatebox-text validatebox-invalid" data-options="required:true" name="drivingLicensesInfo"
                            id="phone" style="width:150px;height: 20px; line-height: 20px;">
                    </td>
                    <td style="width:60%;text-align:center">
                        <span style="width:40%;text-align:left">备注：</span>
                        <input type="text" class="easyui-validatebox textbox validatebox-text validatebox-invalid" data-options="required:true" name="drivingLicensesInfo"
                            id="other" style="width:150px;height: 20px; line-height: 20px;">
                    </td>
                </tr>
            </tbody>
        </table>

        <div id="addCred-button" style="text-align:center;padding:0px;margin-top:8px" class="dialog-button">
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w').window('close')">确定</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w').window('close')">关闭</a>
        </div>
    </div>
    <div id='w2' class="easyui-window" closed='true' title="修改缴费管理" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'"
        style="width:600px;height:300px; padding: 5px">

        <table style="width:100%">
            <tbody>
                <tr height="30px" id="JYcredName1">
                    <td>
                        <span style="width:40%;text-align:left">单位：</span>
                        <input type="text" id="cc1" class="validatebox-text easyui-combotree combo-text" autocomplete="on" data-options="url:'../../json/index_tree.json',method:'get',required:false"
                            style="width:150px;" />
                    </td>
                    <td style="width:60%;text-align:center">
                        <span style="width:40%;text-align:left">缴费模式：</span>

                        <select id="credType1" class="easyui-combobox easyui-validatebox combobox-f combo-f validatebox-text" data-options="required:false"
                            style="width: 150px; display: none;" editable="false" comboname="credType">
                            <option value="">请选择缴费模式</option>
                            <option value="">单卡</option>
                            <option value="">批量</option>
                        </select>
                    </td>
                </tr>
                <tr id="trCredLvl1">
                    <td style="width:40%;text-align:left">
                        <span style="width:40%;text-align:left">付费模式:</span>
                        <select id="credLvl1" class="easyui-combobox easyui-validatebox combobox-f combo-f validatebox-text" data-options="required:false"
                            style="width: 150px; display: none;" editable="false" comboname="credLvl">
                            <option value="A1" selected="">请选择</option>
                            <option value="A2">包月</option>
                            <option value="A3">包年</option>
                        </select>
                    </td>
                    <td style="width:60%;text-align:center">
                        <span style="width:40%;text-align:left">SIM卡号：</span>
                        <input type="text" class="easyui-numberbox easyui-validatebox numberbox numberbox-f validatebox-text" data-options="required:true,min:1,max:10"
                            id="simID" style="width: 150px; height: 22px; line-height: 22px;" numberboxname="credcertExpired"
                            title="">
                    </td>
                </tr>
                <tr id="tdDangerCategory1">
                    <td style="width:40%;text-align:left">
                        <span style="width:40%;text-align:left">批次号：</span>
                        <input type="text" class="easyui-numberbox easyui-validatebox numberbox numberbox-f validatebox-text" data-options="required:true,min:1,max:10"
                            id="credcertExpired" style="width: 150px; height: 22px; line-height: 22px;" numberboxname="credcertExpired"
                            title="">
                    </td>
                    <td style="width:60%;text-align:center">
                        <span style="width:40%;text-align:left">SIM数量：</span>
                        <input type="text" class="easyui-validatebox textbox validatebox-text validatebox-invalid" data-options="required:true" name="drivingLicensesInfo"
                            id="simNum" style="width:150px;height: 20px; line-height: 20px;">
                    </td>
                </tr>

                <tr height="30px" id="JYcredcertDate1">
                    <td style="width:40%;text-align:left">
                        <span style="width:40%;text-align:left">缴费时间：</span>
                        <input class="easyui-datebox easyui-validatebox validatebox-text validatebox-invalid datebox-f combo-f" data-options="required:true"
                            id="credcertDate" style="width: 150px; display: none;" comboname="credcertDate">
                    </td>
                    <td style="width:60%;text-align:center">
                        <span style="width:40%;text-align:left">缴费单价：</span>
                        <input type="text" class="easyui-validatebox textbox validatebox-text validatebox-invalid" data-options="required:true" name="drivingLicensesInfo"
                            id="money" style="width:150px;height: 20px; line-height: 20px;">
                    </td>
                </tr>
                <tr id="JYcredcertInspectDate1">
                    <td style="width:40%;text-align:left">
                        <span style="width:40%;text-align:left">缴费总额：</span>
                        <input type="text" class="easyui-validatebox textbox validatebox-text validatebox-invalid" data-options="required:true" name="drivingLicensesInfo"
                            id="totalmoney" style="width:150px;height: 20px; line-height: 20px;">
                    </td>
                    <td style="width:60%;text-align:center">
                        <span style="width:40%;text-align:left">服务开始时间：</span>
                        <input class="easyui-datebox easyui-validatebox validatebox-text validatebox-invalid datebox-f combo-f" data-options="required:true"
                            id="startDate" style="width: 150px; display: none;" comboname="credcertDate">
                    </td>
                </tr>
                <tr id="">
                    <td style="width:50%;text-align:left">
                        <span style="width:40%;text-align:left">服务结束时间：</span>
                        <input class="easyui-datebox easyui-validatebox validatebox-text validatebox-invalid datebox-f combo-f" data-options="required:true"
                            id="endDate" style="width: 150px; display: none;" comboname="credcertDate">
                    </td>
                    <td style="width:60%;text-align:center">
                        <span style="width:40%;text-align:left">出纳姓名：</span>
                        <input type="text" class="easyui-validatebox textbox validatebox-text validatebox-invalid" data-options="required:true" name="drivingLicensesInfo"
                            id="name" style="width:150px;height: 20px; line-height: 20px;">
                    </td>
                </tr>
                <tr id="">
                    <td style="width:40%;text-align:left">
                        <span style="width:40%;text-align:left">出纳电话：</span>
                        <input type="text" class="easyui-validatebox textbox validatebox-text validatebox-invalid" data-options="required:true" name="drivingLicensesInfo"
                            id="phone" style="width:150px;height: 20px; line-height: 20px;">
                    </td>
                    <td style="width:60%;text-align:center">
                        <span style="width:40%;text-align:left">备注：</span>
                        <input type="text" class="easyui-validatebox textbox validatebox-text validatebox-invalid" data-options="required:true" name="drivingLicensesInfo"
                            id="other" style="width:150px;height: 20px; line-height: 20px;">
                    </td>
                </tr>
            </tbody>
        </table>

        <div id="addCred-button1" style="text-align:center;padding:0px;margin-top:8px" class="dialog-button">
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w2').window('close')">确定</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w2').window('close')">关闭</a>
        </div>
    </div>

    <div id='w1' class="easyui-window" closed='true' title="提示信息" data-options="modal:true,collapsible:false,minimizable:false,maximizable:false,iconCls:'icon-save'"
        style="width:300px;height:150px;">
        <div style="padding: 10px;margin-bottom:15px;">
            请选择要操作的数据！
        </div>

        <div style="text-align:center;padding:5px">
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w1').window('close')">确定</a>
        </div>
    </div>


    <div id="vblackdataTablesearch" style="padding: 5px; height: auto" class="datagrid-toolbar clear_box">
        <td>车牌号：</td>
        <td>
            <input type="text" class="easyui-numberbox" data-options="" id="clientName" style="width: 100px; height: 22px; line-height: 22px;"
                title="">
        </td>
        <td>SIM卡号</td>：</td>
        <td>
            <input type="text" class="easyui-numberbox" data-options="" id="clientName" style="width: 100px; height: 22px; line-height: 22px;"
                title="">
        </td>
        <td>终端类型名：</td>
        <td>
            <input type="text" class="easyui-numberbox" data-options="" id="clientName" style="width: 100px; height: 22px; line-height: 22px;"
                title="">
        </td>
        <td>异常开始时间：</td>
        <td>
            <input class="easyui-datetimebox" editable="false" style="width: 140px; display: none;" comboname="useDate">
        </td>
        <td>异常结束时间：</td>
        <td>
            <input class="easyui-datetimebox" editable="false" style="width: 140px; display: none;" comboname="useDate1">
        </td>

        <span class="easyui-linkbutton" data-options="iconCls:'icon-search'" onclick="refreshbtn('#dg')">查询</span>
        <a class="easyui-linkbutton " data-options="iconCls:'icon-search'" onclick="clearSearch('#dg')">重置</a>
        <a href="#" id="amdataTable_dealbtn" class="easyui-linkbutton" data-options="iconCls:'icon-remove'" onclick="deleteRows();">删除</a>
        <a href="#" id="exportExcel" class="easyui-linkbutton ">
            <span class="l-btn-left l-btn-icon-left">
                <span class="l-btn-icon" style="display:inline-block; width:18px;height:18px;">
                    <img src="../../images/excel.png" alt="" style="width:100%;height:100%;" />
                </span>
                &nbsp;导出
            </span>
        </a>
        <table id="dg" title="" style="width:100%;height:700px;" data-options="onRowContextMenu: onRowContextMenu,rownumbers:true,fitColumns:true,singleSelect:false,pagination:true,url:'../../json/alarm_record.json',method:'get'">
            <thead>
                <tr>
                    <th data-options="field:'ck',checkbox:true"></th>
                    <th data-options="field:'vehicleId',width:60,align:'center'">SIM卡号</th>
                    <th data-options="field:'idNumber',width:60,align:'center'">车牌号</th>
                    <th data-options="field:'orgCode',width:60,align:'center'">终端号</th>
                    <th data-options="field:'alarmTypeName',width:60,align:'center'">终端类型名</th>
                    <th data-options="field:'alarmDate',width:60,align:'center'">异常时间</th>
                    <th data-options="field:'endDate',width:60,align:'center'">入库时间</th>
                </tr>
            </thead>
        </table>
    </div>
    <script>
        //   查询		
        function query() {
            $("#dg1").datagrid("load", sy.serializeObject($("#searchForm").form())); //将searchForm表单内的元素序列为对象传递到后台
        }

        function onRowContextMenu(e, rowIndex, rowData) {
            e.preventDefault();
            var selected = $("#dg").datagrid('getRows'); //获取所有行集合对象			
            selected[rowIndex].id; //index为当前右键行的索引，指向当前行对象			
            $('#mm').menu('show', {
                left: e.pageX + 10,
                top: e.pageY
            });
        }

        function edit() {
            var editdData = $("#dg").datagrid('getChecked');
            if (editdData == "") {
                $("#w1").window('open');
            } else {
                $("#w2").window('open');
            }
        }

        function deleteRows() {
            var deletedData = $("#dg").datagrid('getChecked');
            if (deletedData == "") {
                $("#w1").window('open')
            }
            for (var i = deletedData.length - 1; i >= 0; i--) {
                var rowIndex = $("#dg").datagrid('getRowIndex', deletedData[i]);
                if (deletedData.length > 0) {
                    $("#dg").datagrid('deleteRow', rowIndex)
                }

            }
        }
    </script>
</body>

</html>